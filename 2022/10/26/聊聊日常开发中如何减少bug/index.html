

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon_ico.png">
  <link rel="icon" href="/img/favicon_ico.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="分享总结个人的学习路程">
  <meta name="author" content="屠雍">
  <meta name="keywords" content="PCB, 单片机, 物联网, 嵌入式, Java, Linux, Web前端">
  <meta name="description" content="�����ճ���������μ���bug  ǰ�� 1. ���ݿ�ƪ ���ݿ�ƪ�Ļ�����Щ�ط����׵���bug�����أ����ܽ���7�����棺 ����ѯ�����ݿ��ֶ�ע��㡢����ʧЧ�ĳ����������������ӳ١��������ݼ��ݡ�һЩSQL����ע����� 1.1 ����ѯ1.1.1 �Ƿ�����������������ѯ����">
<meta property="og:type" content="article">
<meta property="og:title" content="�����ճ���������μ���bug">
<meta property="og:url" content="http://example.com/2022/10/26/%E8%81%8A%E8%81%8A%E6%97%A5%E5%B8%B8%E5%BC%80%E5%8F%91%E4%B8%AD%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%91bug/index.html">
<meta property="og:site_name" content="小贝比">
<meta property="og:description" content="�����ճ���������μ���bug  ǰ�� 1. ���ݿ�ƪ ���ݿ�ƪ�Ļ�����Щ�ط����׵���bug�����أ����ܽ���7�����棺 ����ѯ�����ݿ��ֶ�ע��㡢����ʧЧ�ĳ����������������ӳ١��������ݼ��ݡ�һЩSQL����ע����� 1.1 ����ѯ1.1.1 �Ƿ�����������������ѯ����">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241941708.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241941001.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241942070.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241944686.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947192.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947376.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947977.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947481.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948138.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948947.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948511.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948283.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948444.png">
<meta property="article:published_time" content="2022-10-26T08:09:02.094Z">
<meta property="article:modified_time" content="2022-10-24T11:49:45.625Z">
<meta property="article:author" content="屠雍">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="�澭">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241941708.png">
  
  <title>�����ճ���������μ���bug - 小贝比</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/atom-one-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>小贝比的个人博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/background7.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="�����ճ���������μ���bug">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-10-26 16:09" pubdate>
        2022年10月26日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      14k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      45 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">�����ճ���������μ���bug</h1>
            
            <div class="markdown-body">
              <center><h2>�����ճ���������μ���bug</h2></center>

<h2 id="j��"><a href="#j��" class="headerlink" title="ǰ��"></a>ǰ��</h2><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241941708.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="1-���ݿ�ƪ"><a href="#1-���ݿ�ƪ" class="headerlink" title="1. ���ݿ�ƪ"></a>1. ���ݿ�ƪ</h2><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241941001.png" srcset="/img/loading.gif" lazyload alt="����ѯ"></p>
<p>���ݿ�ƪ�Ļ�����Щ�ط����׵���bug�����أ����ܽ���7�����棺</p>
<p><strong>����ѯ�����ݿ��ֶ�ע��㡢����ʧЧ�ĳ����������������ӳ١��������ݼ��ݡ�һЩSQL����ע���</strong>��</p>
<h3 id="1-1-����ѯ"><a href="#1-1-����ѯ" class="headerlink" title="1.1 ����ѯ"></a>1.1 ����ѯ</h3><h4 id="1-1-1-�Ƿ���������"><a href="#1-1-1-�Ƿ���������" class="headerlink" title="1.1.1 �Ƿ���������"></a>1.1.1 �Ƿ���������</h4><p>��������ѯ���������Ͼͻ��뵽�����������һ��SQLû������������û�����������Ļ����ͻ��������ѯ��</p>
<p><strong>������Щ�����ʧЧ��</strong></p>
<ul>
<li>��ѯ��������or�����ܵ�������ʧЧ</li>
<li>����ֶ��������ַ�����whereʱһ������������������������ʧЧ</li>
<li>likeͨ������ܵ�������ʧЧ��</li>
<li>������������ѯʱ�������в������������еĵ�һ���У�����ʧЧ��</li>
<li>����������ʹ��mysql�����ú���������ʧЧ��</li>
<li>�����������㣨�磬+��-��*��/��������ʧЧ��</li>
<li>�����ֶ���ʹ�ã���= ���� &lt; &gt;��not in��ʱ�����ܻᵼ������ʧЧ��</li>
<li>�����ֶ���ʹ��is null�� is not null�����ܵ�������ʧЧ��</li>
<li>�����Ӳ�ѯ���������Ӳ�ѯ��ѯ�������ֶα����ʽ��һ�������ܵ�������ʧЧ��</li>
<li>mysql����ʹ��ȫ��ɨ��Ҫ��ʹ��������,��ʹ��������</li>
</ul>
<h4 id="1-1-2-�������󣬿��Ƿֿ�ֱ�"><a href="#1-1-2-�������󣬿��Ƿֿ�ֱ�" class="headerlink" title="1.1.2 �������󣬿��Ƿֿ�ֱ�"></a>1.1.2 �������󣬿��Ƿֿ�ֱ�</h4><p>����������̫�󣬾ͻ�Ӱ��SQLִ�����ܡ�����֪���������ݽṹһ����B+����һ�ø߶�Ϊ3��B+������ſ��Դ洢��ǧ������ݡ�����������Ļ���B+��Ҫ��ߣ���ѯ���ܻ��½���</p>
<p>��ˣ����������ʱ�򣬽���ֿ�ֱ����ֿ�ֱ����м����<strong>mycat��sharding-jdbc</strong></p>
<h4 id="1-1-3-��������SQL"><a href="#1-1-3-��������SQL" class="headerlink" title="1.1.3 ��������SQL"></a>1.1.3 ��������SQL</h4><p>�ճ������У����߼����ܶ಻������SQL������һ��SQL��Ȼ����<strong>6��������</strong>,����̫���Ӱ���ѯ���ܣ��ٱ���һ��������Ȼ����<strong>10������</strong>�ȵȡ������ǻή���˲���͸���SQL���ܣ���������һ�㲻����̫�࣬һ�㲻�ܳ��������</p>
<h3 id="1-2-���ݿ��ֶ�ע���"><a href="#1-2-���ݿ��ֶ�ע���" class="headerlink" title="1.2 ���ݿ��ֶ�ע���"></a>1.2 ���ݿ��ֶ�ע���</h3><p>���ݿ��ֶ�������ݣ������׳�bug�����磬����Ի����޸��˱��ṹ������ĳ���ֶΣ����ǰѽű����������������Ƿ���϶��������ˡ�</p>
<h4 id="1-2-1-�ֶ��Ƿ�ᳬ��"><a href="#1-2-1-�ֶ��Ƿ�ᳬ��" class="headerlink" title="1.2.1 �ֶ��Ƿ�ᳬ��"></a>1.2.1 �ֶ��Ƿ�ᳬ��</h4><p>����������ݿ��ֶ��ǣ�</p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">`name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br></code></pre></div></td></tr></table></figure>

<p>�������������˱���name���ֶγ�����300���ǲ������ʱ���<strong>����</strong>�ˡ�������ҪУ���������ֹ�ֶγ�����</p>
<h4 id="1-2-2-�ֶ�Ϊ�գ��Ƿ�ᵼ�¿�ָ���"><a href="#1-2-2-�ֶ�Ϊ�գ��Ƿ�ᵼ�¿�ָ���" class="headerlink" title="1.2.2 �ֶ�Ϊ�գ��Ƿ�ᵼ�¿�ָ���"></a>1.2.2 �ֶ�Ϊ�գ��Ƿ�ᵼ�¿�ָ���</h4><p>����������ݿ���ֶε�ʱ��,�������ֶ�����Ϊ<strong>not null</strong>��</p>
<ul>
<li>��������Σ�����һ��ʹ��0����-1��ΪĬ��ֵ��</li>
<li>����ַ�����Ĭ�Ͽ��ַ���</li>
</ul>
<p>������ݿ��ֶ�����Ϊ<code>NULL</code>ֵ�����׵��³����ָ�룻������ݿ��ֶ�����Ϊ<code>NULL</code>ֵ����Ҫע��<strong>count(������)</strong> ��ʹ�ã����пӡ�</p>
<h4 id="1-2-3-�ֶ�oʧ"><a href="#1-2-3-�ֶ�oʧ" class="headerlink" title="1.2.3 �ֶ�ȱʧ"></a>1.2.3 �ֶ�ȱʧ</h4><p>���ǵ��ճ�������������ڲ��Ի������Ա������޸ģ�����������һ�����ֶΣ�����Ҫ��SQL�ű��������������������ֶ�ȱʧ�����������������</p>
<h4 id="1-2-4-�ֶ������Ƿ�֧�ֱ���"><a href="#1-2-4-�ֶ������Ƿ�֧�ֱ���" class="headerlink" title="1.2.4 �ֶ������Ƿ�֧�ֱ���"></a>1.2.4 �ֶ������Ƿ�֧�ֱ���</h4><p>���һ�����ֶ���Ҫ֧�ֱ���洢��ʹ��<strong>utf8mb4</strong>��</p>
<h4 id="1-2-5-����ʹ��text��blob�ֶ�"><a href="#1-2-5-����ʹ��text��blob�ֶ�" class="headerlink" title="1.2.5 ����ʹ��text��blob�ֶ�"></a>1.2.5 ����ʹ��text��blob�ֶ�</h4><p>�����Ҫ��һ���ֶδ洢�ļ�������<strong>�洢�ļ���·��</strong>���������������ļ���ȥ��ʹ��textʱ���漰��ѯ����ʱ��ע�ⴴ��<strong>ǰ׺����</strong>��</p>
<h3 id="1-3-����ʧЧ�ĳ���"><a href="#1-3-����ʧЧ�ĳ���" class="headerlink" title="1.3 ����ʧЧ�ĳ���"></a>1.3 ����ʧЧ�ĳ���</h3><h4 id="1-3-1-Transactional-�ڷ�public���εk�����ʧЧ"><a href="#1-3-1-Transactional-�ڷ�public���εk�����ʧЧ" class="headerlink" title="1.3.1 @Transactional �ڷ�public���εķ�����ʧЧ"></a>1.3.1 @Transactional �ڷ�public���εķ�����ʧЧ</h4><p>@Transactionalע�⣬���ڷ�public���εķ����ϣ������ǲ�����Ч�ġ�spring�����ǽ����AOP��˼�룬Ҳ��ͨ����̬������ʵ�ֵġ�spring�����Լ��ڵ��ö�̬����֮ǰ���Ѿ��Է�public���������ˣ����Է�public������������Ч��</p>
<h4 id="1-3-2-���ط���ֱ�ӵ���"><a href="#1-3-2-���ط���ֱ�ӵ���" class="headerlink" title="1.3.2 ���ط���ֱ�ӵ���"></a>1.3.2 ���ط���ֱ�ӵ���</h4><p>�������������  @Transactional����Ҳ����Ч��</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TransactionTest</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">A</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//����һ������</span><br>    <span class="hljs-comment">//���÷���B (���ص�����ã�����ʧЧ��)</span><br>    B();<br>  &#125;<br>  <br>  <span class="hljs-meta">@Transactional</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">B</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//��������</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h4 id="1-3-3-�쳣��try…catch���ˣ���������ʧЧ��"><a href="#1-3-3-�쳣��try…catch���ˣ���������ʧЧ��" class="headerlink" title="1.3.3 �쳣��try…catch���ˣ���������ʧЧ��"></a>1.3.3 �쳣��try…catch���ˣ���������ʧЧ��</h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Transactional</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">method</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">//����һ������</span><br>    insertA();<br>    <span class="hljs-comment">//����һ������</span><br>    updateB();<br>  &#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>    logger.error(<span class="hljs-string">&quot;�쳣�������ˣ�����������ʧЧ��&quot;</span>,e);<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h4 id="1-3-4-rollbackFor�������o���"><a href="#1-3-4-rollbackFor�������o���" class="headerlink" title="1.3.4 rollbackFor�������ô���"></a>1.3.4 rollbackFor�������ô���</h4><p>SpringĬ���׳���δ���<code>unchecked</code>�쳣���̳���RuntimeException ���쳣������Error�Żع����������쳣���ᴥ���ع�����������������׳��������͵��쳣������Ҫָ��<code>rollbackFor</code>���ԡ�</p>
<h4 id="1-3-5-�ײ����ݿ����治֧������"><a href="#1-3-5-�ײ����ݿ����治֧������" class="headerlink" title="1.3.5 �ײ����ݿ����治֧������"></a>1.3.5 �ײ����ݿ����治֧������</h4><p>MyISAM�洢���治֧������InnoDb��֧������</p>
<h4 id="1-3-6-spring�����ҵ���߼����������һ���߳���"><a href="#1-3-6-spring�����ҵ���߼����������һ���߳���" class="headerlink" title="1.3.6 spring�����ҵ���߼����������һ���߳���"></a>1.3.6 spring�����ҵ���߼����������һ���߳���</h4><p>ҵ�����Ҫ��spring�����Դ����ͬһ���߳��У��Ż���spring����Ŀ��ơ�����������룬����mothed�����̣߳��ڲ�ִ�е����������������mothed������spring����Ŀ��ƣ���һ����Ҫע�⡣������Ϊspring����ʵ����ʹ����ThreadLocal��ʵ��ͬһ���߳������ݹ�����</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Transactional</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mothed</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">new</span> Thread() &#123;<br>      �������<br>    &#125;.start();<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="1-4-����"><a href="#1-4-����" class="headerlink" title="1.4 ����"></a>1.4 ����</h3><p>������ָ��������������ͬһ��Դ���໥ռ�ã������������Է�����Դ���Ӷ����¶���ѭ��������</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241942070.png" srcset="/img/loading.gif" lazyload></p>
<p>MySQL�ڲ���һ�����������ƣ�һ�����������������ع�һ����������һ������ִ����ȥ����������<strong>��Դ�������ʽ��͡����̵ò�����ȷ���</strong>��Σ����</p>
<h4 id="1-4-1-9�������SQL��������"><a href="#1-4-1-9�������SQL��������" class="headerlink" title="1.4.1 9�������SQL��������"></a>1.4.1 9�������SQL��������</h4><p>Ҫ������������Ҫѧ�������һ��SQL�ļ�������ν��е�?һ��SQL���������Է�9���������̽�֣�</p>
<ul>
<li>���һ��id����������RC���뼶��</li>
<li>��϶���id���Ƕ���Ψһ������RC���뼶��</li>
<li>�������id���Ƕ�����Ψһ������RC���뼶��</li>
<li>����ģ�id����û��������RC���뼶��</li>
<li>����壺id����������RR���뼶��</li>
<li>�������id���Ƕ���Ψһ������RR���뼶��</li>
<li>����ߣ�id���Ƕ�����Ψһ������RR���뼶��</li>
<li>��ϰˣ�id����û��������RR���뼶��</li>
<li>��Ͼţ�Serializable���뼶��</li>
</ul>
<h4 id="1-4-2-��η������������"><a href="#1-4-2-��η������������" class="headerlink" title="1.4.2 ��η������������"></a>1.4.2 ��η������������</h4><p>������������Ĳ������£�</p>
<ul>
<li>ģ����������</li>
<li>show engine innodb status;�鿴������־</li>
<li>�ҳ�����SQL</li>
<li>SQL�����������������ȥ��������</li>
<li>����������־������ʲô�����ȴ�ʲô����</li>
<li>��Ϥ��ģʽ���ݾ���InnoDB�洢���������ļ����Ծ���</li>
</ul>
<h3 id="1-5-�����ӳ����⿼��"><a href="#1-5-�����ӳ����⿼��" class="headerlink" title="1.5 �����ӳ����⿼��"></a>1.5 �����ӳ����⿼��</h3><p>�Ȳ��룬���ž�ȥ��ѯ,��������߼��Ƚϳ���������ܻ�������ġ�һ�����ݿⶼ�������⣬�ӿ�ġ�д��Ļ���д���⣬��һ���Ƕ��ӿ⡣������������ӳ٣����ܿ��ܳ��������ɹ��ˣ��������ѯ�����������</p>
<h4 id="1-5-1-Ҫ��oһ���ԣ����Ƕ�����"><a href="#1-5-1-Ҫ��oһ���ԣ����Ƕ�����" class="headerlink" title="1.5.1 Ҫ��ǿһ���ԣ����Ƕ�����"></a>1.5.1 Ҫ��ǿһ���ԣ����Ƕ�����</h4><p>�������Ҫҵ��Ҫ��ǿһ���ԣ�����ֱ�Ӷ�����</p>
<h4 id="1-5-2-��Ҫ��oһ���ԣ����ӿ�"><a href="#1-5-2-��Ҫ��oһ���ԣ����ӿ�" class="headerlink" title="1.5.2 ��Ҫ��ǿһ���ԣ����ӿ�"></a>1.5.2 ��Ҫ��ǿһ���ԣ����ӿ�</h4><p>�����һ��ҵ�񣬿��Խ��ܶ��ݵ����ݲ�һ�µĻ������ȿ��Ƕ��ӿ⡣��Ϊ�ӿ���Էֵ�����Ķ�дѹ�������ϵͳ���ܡ�</p>
<h3 id="1-6-�������ݼ���"><a href="#1-6-�������ݼ���" class="headerlink" title="1.6 �������ݼ���"></a>1.6 �������ݼ���</h3><h4 id="1-6-1-�¼ӵ��ֶΣ����G������ݵ�I��ֵ"><a href="#1-6-1-�¼ӵ��ֶΣ����G������ݵ�I��ֵ" class="headerlink" title="1.6.1 �¼ӵ��ֶΣ����Ǵ������ݵ�Ĭ��ֵ"></a>1.6.1 �¼ӵ��ֶΣ����Ǵ������ݵ�Ĭ��ֵ</h4><p>�����ճ������У�����ҵ����������������Ҫ��ĳ�����ݿ�����Ӹ��ֶΡ�������ĳ��APP���ñ�����Ҫ���Ӹ��������ֶΣ���<code>scene_type</code>,����ö��ֵ�� <code>01��02��03</code>�������Ǿ�Ҫ��ҵ����룬�����ӵ��ֶΣ���������ʲôĬ��ֵ����Ϊ�ջ���Ĭ��01�������Ϊ<code>NULL</code>�Ļ�����������Ҫ���ÿ�ָ�봦����</p>
<h4 id="1-6-2-�����ҵ�����ϵ��ֶΣ����������ݵ�ֵ�Ƿ��п�"><a href="#1-6-2-�����ҵ�����ϵ��ֶΣ����������ݵ�ֵ�Ƿ��п�" class="headerlink" title="1.6.2 �����ҵ�����ϵ��ֶΣ����������ݵ�ֵ�Ƿ��п�"></a>1.6.2 �����ҵ�����ϵ��ֶΣ����������ݵ�ֵ�Ƿ��п�</h4><p>������ǿ����У���Ҫ�������ݿ�������ֶΣ������д������ݣ��Ǿ���Ҫ�����ϴ������ݿ��ֵ�Ƿ��пӡ��������Ǳ��и�user_role_code ���ֶΣ��ϵ������У���ö��ֵ�� <code> 01����������Ա 02������Ա 03��һ���û�</code>������ҵ��������<strong>һ���û�</strong>���Ϊ<strong>03��ѯ�û���04�����û�</strong>���������ڿ����У���Ҫ���������ݵ���������</p>
<h3 id="1-7-һЩSQL�l���ע���"><a href="#1-7-һЩSQL�l���ע���" class="headerlink" title="1.7 һЩSQL�ľ���ע���"></a>1.7 һЩSQL�ľ���ע���</h3><h4 id="1-7-1-limit���ҳ����"><a href="#1-7-1-limit���ҳ����" class="headerlink" title="1.7.1 limit���ҳ����"></a>1.7.1 limit���ҳ����</h4><p>limit���ҳ��һ���ǳ������SQL���⣬����һ������3�ֶ�Ӧ�Ľ������</p>
<p><strong>����һ��</strong> ���id�������ģ����������������ϴβ�ѯ������¼(ƫ����)��������limit</p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> id, name <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000000</span> limit <span class="hljs-number">10</span>;<br></code></pre></div></td></tr></table></figure>

<p><strong>������:</strong> ��ҵ�����������������ҳ����</p>
<p>�����ҵ�����ۣ���û�б�Ҫ����ô��ķ�ҳ������Ϊ��������û�����������̫��ҳ���ȸ�����ҳҲ��������ҳ������˲�����limit���ҳ���⡣</p>
<p><strong>��������</strong>  �����ӳٹ��������Ӳ�ѯ�Ż������ҳ���������ȿ��ٶ�λ��Ҫ��ȡ��id�Σ�Ȼ���ٹ�����</p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> a.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee a, (<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> ���� LIMIT <span class="hljs-number">1000000</span>, <span class="hljs-number">10</span>) b <span class="hljs-keyword">where</span> a.id <span class="hljs-operator">=</span> b.id;<br></code></pre></div></td></tr></table></figure>

<h4 id="1-7-2-�޸g���ѯ��������ʱ�����Ƿ������С�"><a href="#1-7-2-�޸g���ѯ��������ʱ�����Ƿ������С�" class="headerlink" title="1.7.2 �޸ġ���ѯ��������ʱ�����Ƿ������С�"></a>1.7.2 �޸ġ���ѯ��������ʱ�����Ƿ������С�</h4><p>���Ǹ��»��߲�ѯ���ݿ�����ʱ����������ѭ��ȥ�������ݿ⣬���Կ��Ƿ������С�������Ҫ����10�����ݵĻ�������һ�β���500��</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">remoteBatchQuery(param);<br></code></pre></div></td></tr></table></figure>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) &#123;<br>  remoteSingleQuery(param)<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h2 id="2-�������ƪ"><a href="#2-�������ƪ" class="headerlink" title="2. �������ƪ"></a>2. �������ƪ</h2><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241944686.png" srcset="/img/loading.gif" lazyload alt="�������"></p>
<h3 id="2-1-����ϸ��"><a href="#2-1-����ϸ��" class="headerlink" title="2.1 ����ϸ��"></a>2.1 ����ϸ��</h3><h4 id="2-1-1-������Ϳ�ָ������"><a href="#2-1-1-������Ϳ�ָ������" class="headerlink" title="2.1.1 ������Ϳ�ָ������"></a>2.1.1 ������Ϳ�ָ������</h4><p>���Ǳ����ʱ����Ҫע�����������͵Ŀ�ָ������</p>
<ul>
<li>��װ���͵Ŀ�ָ������</li>
<li>�������õĿ�ָ������</li>
<li>Equals������ߵĿ�ָ������</li>
<li>ConcurrentHashMap ����������֧�� k-vΪ null��</li>
<li>���ϣ�����ֱ�ӻ�ȡԪ��</li>
<li>����ֱ�ӻ�ȡ����</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(object != <span class="hljs-keyword">null</span>) &#123;<br>   String name = object.getName();<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h4 id="2-1-2-�̳߳�ʹ��ע���"><a href="#2-1-2-�̳߳�ʹ��ע���" class="headerlink" title="2.1.2 �̳߳�ʹ��ע���"></a>2.1.2 �̳߳�ʹ��ע���</h4><ul>
<li>ʹ�� Executors.newFixedThreadPool�����ܻ����OOM���⣬��Ϊ��ʹ�õ����޽���������</li>
<li>����ʹ���Զ�����̳߳أ���ø��̳߳�һ�������������������Ų�����</li>
<li>��ͬ��ҵ��������̳߳ظ��룬�������е�ҵ����һ���̳߳ء�</li>
<li>�̳߳��쳣����Ҫ���Ǻ�</li>
</ul>
<h4 id="2-1-3-���԰�o�l��ϡ���"><a href="#2-1-3-���԰�o�l��ϡ���" class="headerlink" title="2.1.3 ���԰�ȫ�ļ��ϡ���"></a>2.1.3 ���԰�ȫ�ļ��ϡ���</h4><p>�ڸ߲��������£�<code>HashMap</code>���ܻ������ѭ������Ϊ���Ƿ����԰�ȫ�ģ����Կ���ʹ��<code>ConcurrentHashMap</code>����������ʹ����Щ���ϵ�ʱ����Ҫע���ǲ������԰�ȫ�ġ�</p>
<ul>
<li>Hashmap��Arraylist��LinkedList��TreeMap�ȶ������Բ���ȫ�ģ�</li>
<li>Vector��Hashtable��ConcurrentHashMap�ȶ������԰�ȫ��</li>
</ul>
<h4 id="2-1-4-���ڸ�ʽ���������ȵ�"><a href="#2-1-4-���ڸ�ʽ���������ȵ�" class="headerlink" title="2.1.4  ���ڸ�ʽ���������ȵ�"></a>2.1.4  ���ڸ�ʽ���������ȵ�</h4><p>�ճ�������������Ҫ�����ڸ�ʽ���������أ��������ΪYYYY��д��ʱ�����пӵ�Ŷ��</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Calendar calendar = Calendar.getInstance();<br>calendar.set(<span class="hljs-number">2019</span>, Calendar.DECEMBER, <span class="hljs-number">31</span>);<br><br>Date testDate = calendar.getTime();<br><br>SimpleDateFormat dtf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;YYYY-MM-dd&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;2019-12-31 ת YYYY-MM-dd ��ʽ�� &quot;</span> + dtf.format(testDate));<br></code></pre></div></td></tr></table></figure>
<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">2019-12-31 ת YYYY-MM-dd ��ʽ�� 2020-12-31<br></code></pre></div></td></tr></table></figure>

<p>���н�����Ҳ�Ƚϳ���������Ҫע�⾫�����⣺</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        System.out.println(<span class="hljs-number">0.1</span>+<span class="hljs-number">0.2</span>);<br>        System.out.println(<span class="hljs-number">1.0</span>-<span class="hljs-number">0.8</span>);<br>        System.out.println(<span class="hljs-number">4.015</span>*<span class="hljs-number">100</span>);<br>        System.out.println(<span class="hljs-number">123.3</span>/<span class="hljs-number">100</span>);<br><br>        <span class="hljs-keyword">double</span> amount1 = <span class="hljs-number">3.15</span>;<br>        <span class="hljs-keyword">double</span> amount2 = <span class="hljs-number">2.10</span>;<br>        <span class="hljs-keyword">if</span> (amount1 - amount2 == <span class="hljs-number">1.05</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;OK&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">0.30000000000000004<br>0.19999999999999996<br>401.49999999999994<br>1.2329999999999999<br></code></pre></div></td></tr></table></figure>



<h4 id="2-1-5-���l�����"><a href="#2-1-5-���l�����" class="headerlink" title="2.1.5 ���ļ�����"></a>2.1.5 ���ļ�����</h4><p>��ȡ���ļ���ʱ�򣬲�Ҫ<code>Files.readAllBytes</code>ֱ�Ӷ����ڴ棬��OOM�ģ�����ʹ��<code>BufferedReader </code>һ��һ����������ʹ��<code>NIO</code></p>
<h4 id="2-1-6-ʹ����IO��Դ������Ҫ�ر�"><a href="#2-1-6-ʹ����IO��Դ������Ҫ�ر�" class="headerlink" title="2.1.6 ʹ����IO��Դ������Ҫ�ر�"></a>2.1.6 ʹ����IO��Դ������Ҫ�ر�</h4><p>ʹ��try-with-resource����д���ļ�����Ҫ�ر���</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (FileInputStream inputStream = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;jay.txt&quot;</span>)) &#123;<br>    <span class="hljs-comment">// use resources   </span><br>&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>    log.error(e);<br>&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>    log.error(e);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="2-1-7-try…catch�쳣ʹ�o�һЩ��"><a href="#2-1-7-try…catch�쳣ʹ�o�һЩ��" class="headerlink" title="2.1.7 try…catch�쳣ʹ�õ�һЩ��"></a>2.1.7 try…catch�쳣ʹ�õ�һЩ��</h4><ul>
<li>������Ҫʹ��e.printStackTrace()��ӡ�����ܵ����ַ����������ڴ�ռ�ռ��</li>
<li>catch���쳣��ʹ��log������ӡ����</li>
<li>��Ҫ��һ��Exception��׽���п��ܵ��쳣</li>
<li>��Ҫ�Ѳ����쳣����ҵ���߼�������</li>
</ul>
<h4 id="2-1-8-�Y�ѯ���ٸ���-ɾ���Ĳ���һ����"><a href="#2-1-8-�Y�ѯ���ٸ���-ɾ���Ĳ���һ����" class="headerlink" title="2.1.8 �Ȳ�ѯ���ٸ���/ɾ���Ĳ���һ����"></a>2.1.8 �Ȳ�ѯ���ٸ���/ɾ���Ĳ���һ����</h4><p>�ճ������У����ִ���ʵ�־����ɼ����Ȳ�ѯ�Ƿ���ʣ����õ�Ʊ����ȥ����Ʊ������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(selectIsAvailable(ticketId) &#123;	<br>    <span class="hljs-number">1</span>��deleteTicketById(ticketId)	<br>    <span class="hljs-number">2</span>�����ֽ����Ӳ���	<br>&#125; <span class="hljs-keyword">else</span> &#123;	<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;û�п����ֽ�ȯ&quot;</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>����ǲ���ִ�У��ܿ���������ģ�Ӧ���������ݿ����/ɾ����ԭ���ԣ��������£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(deleteAvailableTicketById(ticketId) == <span class="hljs-number">1</span>)&#123;	<br>    <span class="hljs-number">1</span>�����ֽ����Ӳ���	<br>&#125;<span class="hljs-keyword">else</span>&#123;	<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;û�п����ֽ�ȯ&quot;</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="2-2-�s����ӿ�"><a href="#2-2-�s����ӿ�" class="headerlink" title="2.2 �ṩ����ӿ�"></a>2.2 �ṩ����ӿ�</h3><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947192.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="2-2-1-У������Ϸ���"><a href="#2-2-1-У������Ϸ���" class="headerlink" title="2.2.1 У������Ϸ���"></a>2.2.1 У������Ϸ���</h4><p>�����ṩ����Ľӿڣ��������ṩ���ͻ��ˡ�����ǰ�ˣ��ֻ��Ǳ��ϵͳ���ã�����ҪУ��һ����εĺϷ��ԡ�</p>
<blockquote>
<p>���������ݿ��ֶ�����Ϊvarchar(16),�Է�����һ��32λ���ַ����������㲻У��������ȣ��������ݿ�ֱ���쳣�ˡ�</p>
</blockquote>
<h4 id="2-2-2-���Ͻӿڼ���"><a href="#2-2-2-���Ͻӿڼ���" class="headerlink" title="2.2.2 ���Ͻӿڼ���"></a>2.2.2 ���Ͻӿڼ���</h4><p>�ܶ�bug������Ϊ�޸��˶����Ͻӿڣ�����ȴ�������ݵ��µġ��ؼ������������ǱȽ����صģ�����ֱ�ӵ���ϵͳ����ʧ�ܵġ����ֳ���Ա�����׷��������Ŷ~</p>
<p>���������и�dubbo�ķֲ�ʽ�ӿڣ��������޸�����Σ�����Ҫ�������Ͻӿڼ��ݡ�ԭ����ֻ����A��B���������������һ������C���Ϳ��Կ�������������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//�Ͻӿ�</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">oldService</span><span class="hljs-params">(A, B)</span> </span>&#123;<br>  <span class="hljs-comment">//�����½ӿڣ�����null����C</span><br>  newService(A, B, <span class="hljs-keyword">null</span>);<br>&#125;<br><br><span class="hljs-comment">//�½ӿڣ���ʱ����ɾ���Ͻӿڣ���Ҫ�����ݡ�</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newService</span><span class="hljs-params">(A, B, C)</span></span>;<br></code></pre></div></td></tr></table></figure>



<h4 id="2-2-3-��������ֹ������ѹ��ϵͳ"><a href="#2-2-3-��������ֹ������ѹ��ϵͳ" class="headerlink" title="2.2.3 ��������ֹ������ѹ��ϵͳ"></a>2.2.3 ��������ֹ������ѹ��ϵͳ</h4><p>���˲��Ĵ������������������ѹ��ϵͳ������Ϊ�˱������ǵ�ϵͳ��һ��Ҫ����������������ʹ��<strong>guava ratelimiter</strong> �����������Ҳ�����ð��￪Դ��<strong>Sentinel</strong></p>
<h4 id="2-2-4-�ӿڰ�o�ԣ���k��k����E"><a href="#2-2-4-�ӿڰ�o�ԣ���k��k����E" class="headerlink" title="2.2.4 �ӿڰ�ȫ�ԣ���ǩ��ǩ����Ȩ"></a>2.2.4 �ӿڰ�ȫ�ԣ���ǩ��ǩ����Ȩ</h4><p>����ת�˵����͵Ľӿڣ�һ��Ҫע�ⰲȫ�ԡ�һ��Ҫ��Ȩ��<strong>��ǩ��ǩ</strong>��Ϊ�û����ױ��ݻ�����</p>
<h4 id="2-2-5-���aeӿ��ݵ���"><a href="#2-2-5-���aeӿ��ݵ���" class="headerlink" title="2.2.5 ���ǽӿ��ݵ���"></a>2.2.5 ���ǽӿ��ݵ���</h4><p>�ӿ�����Ҫ�����ݵ��Եģ������������ת����Щ��Ҫ�ӿڡ���ֱ�۵�ҵ�񳡾�������<strong>�û����ŵ������</strong>����Ľӿ���û��holdס��</p>
<blockquote>
<ol>
<li>�ݵȣ�idempotent��idempotence����һ����ѧ������ѧ��������ڳ�������С�</li>
<li>�ڱ����.һ���ݵȲ������ص�����������ִ����������Ӱ�����һ��ִ�е�Ӱ����ͬ���ݵȺ��������ݵȷ�������ָ����ʹ����ͬ�����ظ�ִ�У����ܻ����ͬ����ĺ�����</li>
</ol>
</blockquote>
<p>һ�㡸�ݵȼ������������⼸��:</p>
<ol>
<li>��ѯ����</li>
<li>Ψһ����</li>
<li>token���ƣ���ֹ�ظ��ύ</li>
<li>���ݿ��deleteɾ������</li>
<li>�ֹ���</li>
<li>������</li>
<li>Redis��zookeeper �ֲ�ʽ������ǰ�������������Redis�ֲ�ʽ����</li>
<li>״̬���ݵ�</li>
</ol>
<h3 id="2-3-���o������ӿ�"><a href="#2-3-���o������ӿ�" class="headerlink" title="2.3 ���õ������ӿ�"></a>2.3 ���õ������ӿ�</h3><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947376.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="2-3-1-��ʱ����"><a href="#2-3-1-��ʱ����" class="headerlink" title="2.3.1 ��ʱ����"></a>2.3.1 ��ʱ����</h4><p>���ǵ��ñ��˵Ľӿڣ������ʱ����ô���أ�</p>
<blockquote>
<p>�ٸ����ӣ����ǵ���һ��Զ��ת�˽ӿڣ�A�ͻ���B�ͻ�ת100�򣬳ɹ���ʱ��Ͱѱ���ת����ˮ��Ϊ�ɹ���ʧ�ܵ�ʱ��Ͱѱ�����ˮ��Ϊʧ�ܡ��������ת��ϵͳ��ʱ���أ�������ô�����أ���Ϊ�ɹ�����ʧ���أ����<strong>��ʱ������Ҫ���Ǻ�</strong>��Ҫ��Ȼ���ʽ���ʧ�ˡ����ֳ����£����ӿڳ�ʱ�����ǾͿ�����<strong>�����±���ת����ˮ</strong>״̬���������·����ѯԶ��ת�����󣬲�ѯ��ת�˳ɹ��ļ�¼���ٸ��±���״̬״̬</p>
</blockquote>
<h4 id="2-3-2-�������Ի���"><a href="#2-3-2-�������Ի���" class="headerlink" title="2.3.2 �������Ի���"></a>2.3.2 �������Ի���</h4><p>������ǵ���һ��Զ��http����dubbo�ӿڣ�����ʧ���ˣ����ǿ��Կ����������Ի��ơ���ʱ����·����һ�£��ӿھ͵�ʧ���ˣ��������Ի��ƿ�������û����顣����������Ի�����Ҫ����������������Щ�ӿڲ�֧���ݵȣ��Ͳ��ʺ����Եġ�</p>
<h4 id="2-3-3-�����Ƿ񽵼�����"><a href="#2-3-3-�����Ƿ񽵼�����" class="headerlink" title="2.3.3 �����Ƿ񽵼�����"></a>2.3.3 �����Ƿ񽵼�����</h4><p>��������ϵͳ��һ���ṩע��ķ����û�ע��ɹ�֮�󣬵�Զ��A�ӿڷ����ţ���Զ��B�ӿڷ��ʼ���������ע��״̬Ϊ�ɹ���</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947977.png" srcset="/img/loading.gif" lazyload></p>
<p>������ýӿ�B���ʼ�ʧ�ܣ����û���ע��ʧ�ܣ�ҵ����ܾͲ���ͬ���ˡ���ʱ�����ǿ��Կ��Ǹ�B�ӿ�<strong>��������</strong>���ṩ<strong>�������</strong>��Ҳ����˵���������B�ӿ�ʧ�ܣ����Ȳ����ʼ������������û�ע��ɹ�����������ʱ�����ʼ��ͺ�����</p>
<h4 id="2-3-4-�����Ƿ��첽����"><a href="#2-3-4-�����Ƿ��첽����" class="headerlink" title="2.3.4 �����Ƿ��첽����"></a>2.3.4 �����Ƿ��첽����</h4><p>�һ���ʹ���ϸ�С�ڵ�<strong>�û�ע��</strong>�����ӡ����ǿ��Կ����첽�߳�ȥ��A�ӿڷ����ţ��첽��B�ӿڷ��ʼ����Ǽ�ʹA����B�ӿڵ�ʧ�ܣ����ǻ��ǿ��Ա�֤�û���ע��ɹ���</p>
<p>�ѷ�������Щ֪ͨ��ӿڣ��ŵ��첽�̴߳��������Խ��ͽӿں�ʱ�������û�����Ŷ��</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241947481.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="2-3-5-���ӿ��쳣����"><a href="#2-3-5-���ӿ��쳣����" class="headerlink" title="2.3.5 ���ӿ��쳣����"></a>2.3.5 ���ӿ��쳣����</h4><p>������ǵ���һ��Զ�̽ӿڣ�һ����Ҫ˼�����£�������˽ӿ��쳣������Ҫ��ô��������ô���ף������Ի��ǵ���ʧ�ܣ���ô��֤���ݵ�����һ���Եȵȡ�</p>
<h2 id="3-����ƪ"><a href="#3-����ƪ" class="headerlink" title="3. ����ƪ"></a>3. ����ƪ</h2><p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948138.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-1-���ݿ��뻺��һ����"><a href="#3-1-���ݿ��뻺��һ����" class="headerlink" title="3.1 ���ݿ��뻺��һ����"></a>3.1 ���ݿ��뻺��һ����</h3><p>ʹ�û��棬���Խ��ͺ�ʱ���ṩϵͳ�������ܡ����ǣ�ʹ�û��棬���������һ���Ե����⡣</p>
<h4 id="3-1-1-���ֻ���ʹ��gʽ"><a href="#3-1-1-���ֻ���ʹ��gʽ" class="headerlink" title="3.1.1 ���ֻ���ʹ��ģʽ"></a>3.1.1 ���ֻ���ʹ��ģʽ</h4><ul>
<li>Cache-Aside Pattern����·����ģʽ</li>
<li>Read-Through/Write-Through����д��͸��</li>
<li>Write- behind ���첽����д�룩</li>
</ul>
<p>һ������ʹ�û��棬����<strong>��·����ģʽ</strong>����������������:</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948947.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>����ʱ���ȶ����棬�������еĻ���ֱ�ӷ�������</li>
<li>����û�����еĻ�����ȥ�����ݿ⣬�����ݿ�ȡ�����ݣ����뻺���ͬʱ������Ӧ��</li>
</ul>
<p>��·����ģʽ��д���̣�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948511.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="3-1-2-ɾ�������أ����N��»��棿"><a href="#3-1-2-ɾ�������أ����N��»��棿" class="headerlink" title="3.1.2 ɾ�������أ����Ǹ��»��棿"></a>3.1.2 ɾ�������أ����Ǹ��»��棿</h4><p>�����ڲ��������ʱ�򣬵���Ӧ��ɾ�����滹�Ǹ��»����أ����������������ӣ�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948283.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li>�߳�A�ȷ���һ��д��������һ���ȸ������ݿ�</li>
<li>�߳�B�ٷ���һ��д�������ڶ������������ݿ�</li>
<li>���������ԭ���߳�B�ȸ����˻���</li>
<li>�߳�A���»��档</li>
</ol>
<p>��ʱ�򣬻��汣�����A�����ݣ������ݣ������ݿⱣ�����B�����ݣ������ݣ������ݲ�һ���ˣ������ݳ������������ɾ������ȡ�����»����򲻻����������������⡣</p>
<h4 id="3-1-3-�Y������ݿ⻹���Y�������"><a href="#3-1-3-�Y������ݿ⻹���Y�������" class="headerlink" title="3.1.3 �Ȳ������ݿ⻹���Ȳ�������"></a>3.1.3 �Ȳ������ݿ⻹���Ȳ�������</h4><p>˫д������£��Ȳ������ݿ⻹���Ȳ������棿����������һ�����ӣ�������A��B������������A�����²���������B����ѯ��ȡ������</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241948444.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<ol>
<li>�߳�A����һ��д��������һ��del cache</li>
<li>��ʱ�߳�B����һ����������cache miss</li>
<li>�߳�B������DB��������һ��������</li>
<li>Ȼ���߳�B��������������cache</li>
<li>�߳�Aд��DB���µ�����</li>
</ol>
<p>���Ͼ�������������������ݿ�����ݲ�һ���ˡ����汣����������ݣ����ݿⱣ����������ݡ���ˣ�Cache-Aside����ģʽ��ѡ�����Ȳ������ݿ�������Ȳ������档</p>
<h4 id="3-1-4-��α�֤����һ����"><a href="#3-1-4-��α�֤����һ����" class="headerlink" title="3.1.4 ��α�֤����һ����"></a>3.1.4 ��α�֤����һ����</h4><ul>
<li>������ʱ˫ɾ</li>
<li>ɾ���������Ի���</li>
<li>��ȡbiglog�첽ɾ������</li>
</ul>
<h3 id="3-2-���洩͸"><a href="#3-2-���洩͸" class="headerlink" title="3.2 ���洩͸"></a>3.2 ���洩͸</h3><blockquote>
<p>���洩͸��ָ��ѯһ��һ�������ڵ����ݣ����ڻ��治����ʱ����Ҫ�����ݿ��ѯ���鲻��������д�뻺�棬�⽫������������ڵ�����ÿ������Ҫ�����ݿ�ȥ��ѯ�����������ݿ����ѹ����</p>
</blockquote>
<p>���洩͸һ�㶼���⼸����������ģ�<strong>ҵ�񲻺�������ơ�ҵ��/��ά/����ʧ��Ĳ������ڿͷǷ����󹥻�</strong>��<br>��α��⻺�洩͸�أ� һ�������ַ�����</p>
<ul>
<li>����ǷǷ�����������API��ڣ�<strong>�Բ�������У��</strong>�����˷Ƿ�ֵ��</li>
<li>�����ѯ���ݿ�Ϊ�գ����ǿ���<strong>���������ø���ֵ������Ĭ��ֵ</strong>������������д��������Ļ�����Ҫ���»�������Ա�֤����һ���ԣ�ͬʱ���������������ʵ��Ĺ���ʱ�䡣��ҵ���ϱȽϳ��ã�����Ч��</li>
<li>ʹ��<strong>��¡������</strong>�����ж������Ƿ���ڡ���һ����ѯ�������ʱ����ͨ����¡�������ж�ֵ�Ƿ���ڣ����ڲż������²顣</li>
</ul>
<h3 id="3-3-����ѩ��"><a href="#3-3-����ѩ��" class="headerlink" title="3.3 ����ѩ��"></a>3.3 ����ѩ��</h3><blockquote>
<p>����ѩ����ָ���������ݴ�����������ʱ�䣬����ѯ�������޴��������ݿ�ѹ����������down����</p>
</blockquote>
<ul>
<li>����ѩ��һ�������ڴ�������ͬʱ������ɵģ��������ԭ�򣬿�ͨ��<strong>�������ù���ʱ���������ù���ʱ�������ɢһ��</strong>�������һ���ϴ�̶�ֵ+һ����С�����ֵ��5Сʱ+0��1800�뽴�ϡ�</li>
<li><strong>Redis ����崻�Ҳ�������𻺴�ѩ��</strong>�������Ҫ����Redis�߿��ü�Ⱥ����</li>
</ul>
<h3 id="3-4-���������"><a href="#3-4-���������" class="headerlink" title="3.4  ���������"></a>3.4  ���������</h3><blockquote>
<p>��������� ָ�ȵ�key��ĳ��ʱ�����ڵ�ʱ�򣬶�ǡ�������ʱ�������Key�д����Ĳ�������������Ӷ������������db��</p>
</blockquote>
<p>������������е��񻺴�ѩ������ʵ���������ǣ�����ѩ����ָ���ݿ�ѹ����������down�����������ֻ�Ǵ�������������DB���ݿ���档������Ϊ�����ǻ���ѩ����һ���Ӽ��ɡ���Щ������Ϊ�������������ڻ������ĳһ�ȵ�key���棬ѩ�����Ǻܶ�key��</p>
<p>��������������֣�</p>
<ol>
<li><strong>ʹ�û���������</strong>������ʧЧʱ����������ȥ����db���ݣ�������ʹ��ĳЩ���ɹ����ص�ԭ�Ӳ��������(Redis��setnx��ȥ�������ɹ���ʱ����ȥ����db���ݿ����ݺ����û��档�����ȥ���Ի�ȡ���档</li>
<li><strong>���������ڡ�</strong>����ָû�����ù���ʱ�䣬�����ȵ����ݿ�Ҫ����ʱ���첽�߳�ȥ���º����ù���ʱ�䡣</li>
</ol>
<h3 id="3-5-������Key"><a href="#3-5-������Key" class="headerlink" title="3.5 ������Key"></a>3.5 ������Key</h3><p>��Redis�У����ǰѷ���Ƶ�ʸߵ�key����Ϊ�ȵ�key�����ĳһ�ȵ�key�����󵽷���������ʱ�������������ر�󣬿��ܻᵼ��������Դ���㣬����崻����Ӷ�Ӱ�������ķ���</p>
<p>��ν����key���⣿</p>
<ul>
<li><strong>Redis��Ⱥ����</strong>�����ӷ�Ƭ�����������������</li>
<li><strong>����key����hashɢ��</strong>�����罫һ��key����Ϊkey1,key2����keyN��ͬ��������N�����ݣ�N�����ݷֲ�����ͬ��Ƭ������ʱ���������N�������е�һ������һ���ֵ���������</li>
<li><strong>ʹ�ö�������</strong>����JVM���ػ���,����Redis�Ķ�����</li>
</ul>
<h3 id="3-6-���������ڴ濼��"><a href="#3-6-���������ڴ濼��" class="headerlink" title="3.6 ���������ڴ濼��"></a>3.6 ���������ڴ濼��</h3><h4 id="3-6-1-������������������"><a href="#3-6-1-������������������" class="headerlink" title="3.6.1 ������������������"></a>3.6.1 ������������������</h4><p>�������ʹ�õ���Redis����Redis���ڴ��ǱȽϰ���ģ����ǲ�Ҫʲô���ݶ���Redis��������һ��Redisֻ�����ѯ�Ƚ�Ƶ�������ݡ�ͬʱ������Ҫ��������Redis��������Ҳ����Ƶ��set���ǣ����������˹���ʱ���keyʧЧ��</p>
<p>�������ʹ�õ��Ǳ��ػ��棬��guava�ı��ػ��棬ҲҪ��������������������������</p>
<h4 id="3-6-2-Redis�I����ڴ���̭����"><a href="#3-6-2-Redis�I����ڴ���̭����" class="headerlink" title="3.6.2 Redis�İ����ڴ���̭����"></a>3.6.2 Redis�İ����ڴ���̭����</h4><p>Ϊ�˱���Redis�ڴ治���ã�Redis��8���ڴ���̭���Ա����Լ�~</p>
<blockquote>
<ul>
<li>volatile-lru�����ڴ治����������д������ʱ���������˹���ʱ���key��ʹ��LRU���������ʹ�ã��㷨������̭��</li>
<li>allkeys-lru�����ڴ治����������д������ʱ��������key��ʹ��LRU���������ʹ�ã��㷨������̭��</li>
<li>volatile-lfu��4.0�汾���������ڴ治����������д������ʱ���ڹ��ڵ�key�У�ʹ��LFU�㷨����ɾ��key��</li>
<li>allkeys-lfu��4.0�汾���������ڴ治����������д������ʱ��������key��ʹ��LFU�㷨������̭��</li>
<li>volatile-random�����ڴ治����������д������ʱ���������˹���ʱ���key�У������̭���ݣ���</li>
<li>allkeys-random�����ڴ治����������д������ʱ��������key�������̭���ݡ�</li>
<li>volatile-ttl�����ڴ治����������д������ʱ���������˹���ʱ���key�У����ݹ���ʱ�������̭��Խ����ڵ����ȱ���̭��</li>
<li>noeviction��Ĭ�ϲ��ԣ����ڴ治����������д������ʱ����д������ᱨ����</li>
</ul>
</blockquote>
<h4 id="3-6-3-��ͬ��ҵ�񳡾���Redisѡ���ʺϵ����ݽu"><a href="#3-6-3-��ͬ��ҵ�񳡾���Redisѡ���ʺϵ����ݽu" class="headerlink" title="3.6.3 ��ͬ��ҵ�񳡾���Redisѡ���ʺϵ����ݽṹ"></a>3.6.3 ��ͬ��ҵ�񳡾���Redisѡ���ʺϵ����ݽṹ</h4><ul>
<li>���а��ʺ���zset</li>
<li>�����û���Ϣһ����hash</li>
<li>��Ϣ���У������б�������list</li>
<li>�û���ǩ���罻����һ����set</li>
<li>���������ֲ�ʽ����һ����String����</li>
</ul>
<h3 id="3-7-RedisһЩ�пӵ�����"><a href="#3-7-RedisһЩ�пӵ�����" class="headerlink" title="3.7 RedisһЩ�пӵ�����"></a>3.7 RedisһЩ�пӵ�����</h3><ol>
<li>����ʹ�� keysָ��</li>
<li>����O(n)���Ӷ������hgetall��</li>
<li>����Redis��monitor����</li>
<li>��ֹʹ��flushall��flushdb</li>
<li>ע��ʹ��del����</li>
</ol>
<h2 id="���"><a href="#���" class="headerlink" title="���"></a>���</h2><p>�����ܽ���60�������bug�ı���ע��㣬�����ճ���������ķ�����ϣ���Դ���а�������</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/categories/Java/interview/">interview</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/tags/%EF%BF%BD%E6%BE%AD/">�澭</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/26/%E4%B8%83%E7%A7%8D%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">七种方案对比分布式锁</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/26/Volatile%E5%85%A8%E6%96%B9%E4%BD%8D%E8%A7%A3%E6%9E%90/">
                        <span class="hidden-mobile">Volatile全方位解析</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://github.com/xiaobeibi" target="_blank" rel="nofollow noopener"><span>Github</span></a> <i class="iconfont icon-love"></i> <a href="https://gitee.com/tytokongjian" target="_blank" rel="nofollow noopener"><span>Gitee</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
