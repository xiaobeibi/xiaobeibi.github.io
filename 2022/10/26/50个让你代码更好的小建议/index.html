

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon_ico.png">
  <link rel="icon" href="/img/favicon_ico.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="分享总结个人的学习路程">
  <meta name="author" content="屠雍">
  <meta name="keywords" content="PCB, 单片机, 物联网, 嵌入式, Java, Linux, Web前端">
  <meta name="description" content="50�����������õ�С����  ǰ��50�����������õĽ��顣���е�һЩ�㣬����ǰ������Ҳд�����������Ҫ����һ�¡�ϣ������ճ�д������˼��������ܽᣬ���ͣ�ͬʱ�����в��Եģ�Ҳ��ָ������л��~ 1. �����ж��Ƿ����ʱ��select count �� select ������У����á�">
<meta property="og:type" content="article">
<meta property="og:title" content="50�����������õ�С����">
<meta property="og:url" content="http://example.com/2022/10/26/50%E4%B8%AA%E8%AE%A9%E4%BD%A0%E4%BB%A3%E7%A0%81%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%B0%8F%E5%BB%BA%E8%AE%AE/index.html">
<meta property="og:site_name" content="小贝比">
<meta property="og:description" content="50�����������õ�С����  ǰ��50�����������õĽ��顣���е�һЩ�㣬����ǰ������Ҳд�����������Ҫ����һ�¡�ϣ������ճ�д������˼��������ܽᣬ���ͣ�ͬʱ�����в��Եģ�Ҳ��ָ������л��~ 1. �����ж��Ƿ����ʱ��select count �� select ������У����á�">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241906033.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241906575.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241910346.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241918885.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241918934.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241919044.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241929923.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241931620.png">
<meta property="og:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241931446.png">
<meta property="article:published_time" content="2022-10-26T08:09:02.292Z">
<meta property="article:modified_time" content="2022-10-24T11:37:54.418Z">
<meta property="article:author" content="屠雍">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="�澭">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241906033.png">
  
  <title>50�����������õ�С���� - 小贝比</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/atom-one-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>小贝比的个人博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/background7.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="50�����������õ�С����">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-10-26 16:09" pubdate>
        2022年10月26日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      30k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      94 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">50�����������õ�С����</h1>
            
            <div class="markdown-body">
              <center><h2>50�����������õ�С����</h2></center>

<h3 id="j��"><a href="#j��" class="headerlink" title="ǰ��"></a>ǰ��</h3><p>50�����������õĽ��顣���е�һЩ�㣬����ǰ������Ҳд�����������Ҫ����һ�¡�ϣ������ճ�д������˼��������ܽᣬ���ͣ�ͬʱ�����в��Եģ�Ҳ��ָ������л��~</p>
<h3 id="1-�����ж��Ƿ����ʱ��select-count-��-select-������У����a�"><a href="#1-�����ж��Ƿ����ʱ��select-count-��-select-������У����a�" class="headerlink" title="1. �����ж��Ƿ����ʱ��select count �� select ������У����á�"></a>1. �����ж��Ƿ����ʱ��select count �� select ������У����á�</h3><p>���Ǿ����������Ƶ�ҵ�񳡾����磬�ж�ĳ���û�<code>userId</code>�Ƿ��ǻ�Ա��</p>
<p><strong>����������</strong>  һЩС��������ʵ�֣��Ȳ���û���Ϣ������û���¼��Ȼ����ȥ�ж��Ƿ��ǻ�Ա:</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">&lt;select id=<span class="hljs-string">&quot;selectUserByUserId&quot;</span> resultMap=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;<br>     select user_id, vip_flag from  user_info where user_id =#&#123;userId&#125;;<br> &lt;/select&gt;<br><br><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isVip</span> <span class="hljs-params">(String userId)</span> </span>&#123;<br>  UserInfo userInfo = userInfoDAp.selectUserByUserId(userId);<br>  <span class="hljs-keyword">return</span> UserInfo != <span class="hljs-keyword">null</span> &amp;&amp; <span class="hljs-string">&quot;Y&quot;</span>.equals(userInfo.getVipFlag());<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>����������</strong> �������ҵ�񳡾�����ʵ���õ�ʵ�֣���ֱ��<code>select count</code>һ�£����£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">&lt;select id=<span class="hljs-string">&quot;countVipUserByUserId&quot;</span> resultType=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;<br>     <span class="hljs-function">select <span class="hljs-title">count</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span> from  user_info where user_id </span>=#&#123;userId&#125; and vip_flag =<span class="hljs-string">&#x27;Y&#x27;</span>;<br> &lt;/select&gt;<br> <br> <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isVip</span> <span class="hljs-params">(String userId)</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> vipNum = userInfoDAp.countVipUserByUserId(userId);<br>  <span class="hljs-keyword">return</span> vipNum &gt; <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="2-���ӵ�if�߼����������Ե���˳���o������Ч"><a href="#2-���ӵ�if�߼����������Ե���˳���o������Ч" class="headerlink" title="2. ���ӵ�if�߼����������Ե���˳���ó������Ч"></a>2. ���ӵ�if�߼����������Ե���˳���ó������Ч</h3><p>����ҵ������������������û��ǻ�Ա�����ҵ�һ�ε�½ʱ����Ҫ��һ��֪ͨ�Ķ��š�����û�о���˼��������ܿ���ֱ������д�ˡ�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(isUserVip &amp;&amp; isFirstLogin) &#123;<br>    sendMsgNotify();<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>�����ܹ���5�����������isUserVipͨ������3������isFirstLoginͨ������1������ ��ô���ϴ��룬isUserVipִ�еĴ���Ϊ5�Σ�isFirstLoginִ�еĴ���Ҳ��3�Σ����£�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241906033.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>�������һ��isUserVip��isFirstLogin��˳���أ�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(isFirstLogin &amp;&amp; isUserVip ) &#123;<br>    sendMsg();<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>isFirstLoginִ�еĴ�����5�Σ�isUserVipִ�еĴ�����1�Σ����£�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241906575.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>������isFirstLogin���ж��߼�ֻ��select count һ�����ݿ����isUserVipҲ��select count һ�����ݿ���Ļ�����Ȼ����isFirstLogin����ǰ�����Ч��</p>
<h3 id="3-д��ѯSql��ʱ��ֻ������Ҫ�o����ֶΣ�����ͨ�o��ֶΣ��ܾ����ֵ�select"><a href="#3-д��ѯSql��ʱ��ֻ������Ҫ�o����ֶΣ�����ͨ�o��ֶΣ��ܾ����ֵ�select" class="headerlink" title="3. д��ѯSql��ʱ��ֻ������Ҫ�õ����ֶΣ�����ͨ�õ��ֶΣ��ܾ����ֵ�select *"></a>3. д��ѯSql��ʱ��ֻ������Ҫ�õ����ֶΣ�����ͨ�õ��ֶΣ��ܾ����ֵ�select *</h3><p><strong>������</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> user_info <span class="hljs-keyword">where</span> user_id <span class="hljs-operator">=</span> #&#123;userId&#125;;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> user_id, vip_flag <span class="hljs-keyword">from</span>  user_info <span class="hljs-keyword">where</span> user_id <span class="hljs-operator">=</span> #&#123;userId&#125;;<br></code></pre></div></td></tr></table></figure>

<p><strong>���ɣ�</strong></p>
<ul>
<li>��ʡ��Դ���������翪����</li>
<li>�����õ��������������ٻر�����߲�ѯЧ�ʡ�</li>
</ul>
<h3 id="4-�Z���ĳ��򣬾ܾ���������Ҫ�K���"><a href="#4-�Z���ĳ��򣬾ܾ���������Ҫ�K���" class="headerlink" title="4. �Ż���ĳ��򣬾ܾ���������Ҫ�Ķ���"></a>4. �Ż���ĳ��򣬾ܾ���������Ҫ�Ķ���</h3><p>�����ı�����������߼��жϣ�һ���ᱻ��ֵ������˵��ֻ��һ���ַ���������ֱ�ӳ�ʼ���ַ��������Ϳ����ˣ�û�б�Ҫ���Ҫnew String().</p>
<p>������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String s = <span class="hljs-keyword">new</span> String (<span class="hljs-string">&quot;��ӭ��ע���ںţ������ݵ�С�к�&quot;</span>);<br></code></pre></div></td></tr></table></figure>

<p>������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String s =  <span class="hljs-string">&quot;��ӭ��ע���ںţ������ݵ�С�к� ��;</span><br></code></pre></div></td></tr></table></figure>


<h3 id="5-��ʼ������ʱ��ָ������"><a href="#5-��ʼ������ʱ��ָ������" class="headerlink" title="5. ��ʼ������ʱ��ָ������"></a>5. ��ʼ������ʱ��ָ������</h3><p>����Ŀ����ֲᣬҲ��ȷ�ᵽ����㣺<br><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241910346.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>�������mapҪ�洢��Ԫ�ظ�����15�����ң�����д������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//initialCapacity = 15 / 0.75 + 1 = 21</span><br>Map map = <span class="hljs-keyword">new</span> HashMap(<span class="hljs-number">21</span>);<br>����ΪhashMap��������<span class="hljs-number">2</span>�����йأ����Կ���ȡ<span class="hljs-number">32</span>������<br>Map map = <span class="hljs-keyword">new</span> HashMap(<span class="hljs-number">32</span>);<br></code></pre></div></td></tr></table></figure>

<h3 id="6-catch���쳣����Ҫ��ӡ�������exception��������o�λ����"><a href="#6-catch���쳣����Ҫ��ӡ�������exception��������o�λ����" class="headerlink" title="6.catch���쳣����Ҫ��ӡ�������exception��������ö�λ����"></a>6.catch���쳣����Ҫ��ӡ�������exception��������ö�λ����</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// do something</span><br>&#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>  log.info(<span class="hljs-string">&quot;�����ݵ�С�к�����ĳ������쳣��&quot;</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// do something</span><br>&#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>  log.info(<span class="hljs-string">&quot;�����ݵ�С�к�����ĳ������쳣����&quot;</span>,e); <span class="hljs-comment">//��exception��ӡ����</span><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>���ɣ�</strong></p>
<ul>
<li>�����У���û�а�exception��������ʱ���Ų�����Ͳ��ò�������������SQlд�����쳣����IO�쳣�����������أ�����Ӧ�ð�exception��ӡ����־��Ŷ~</li>
</ul>
<h3 id="7-��ӡ��־��ʱ�򣬶���u�и���Object��toString�k�����ֱ�Ӱ�������ӡ�����ˡ�"><a href="#7-��ӡ��־��ʱ�򣬶���u�и���Object��toString�k�����ֱ�Ӱ�������ӡ�����ˡ�" class="headerlink" title="7. ��ӡ��־��ʱ�򣬶���û�и���Object��toString�ķ�����ֱ�Ӱ�������ӡ�����ˡ�"></a>7. ��ӡ��־��ʱ�򣬶���û�и���Object��toString�ķ�����ֱ�Ӱ�������ӡ�����ˡ�</h3><p>�����ڴ�ӡ��־��ʱ�򣬾����뿴��һ�������������request��ʲô�����Ǻ�����������������Щ���룺</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function">publick Response <span class="hljs-title">dealWithRequest</span><span class="hljs-params">(Request request)</span> </span>&#123;<br>   log.info(<span class="hljs-string">&quot;��������ǣ�&quot;</span>.request.toString)<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>��ӡ������£�</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">��������ǣ�local.Request@49476842<br></code></pre></div></td></tr></table></figure>

<p>������Ϊ�����toString������Ĭ�ϵ�ʵ���ǡ�����@ɢ������޷���ʮ�����ơ��������㿴�ɣ������Ӵ�ӡ��־��ûɶ��˼�����㶼��֪����ӡ����ʲô���ݡ�</p>
<p>����һ�����(������Ϊ���εĶ��󣩣�<strong>��������дtoString()����</strong>��</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Request</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> String age;<br><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Request&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;age=&#x27;&quot;</span> + age + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function">publick Response <span class="hljs-title">dealWithRequest</span><span class="hljs-params">(Request request)</span></span>&#123;<br>   log.info(<span class="hljs-string">&quot;��������ǣ�&quot;</span>.request.toString)<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>��ӡ������£�</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">��������ǣ�Request&#123;age=<span class="hljs-string">&#x27;26&#x27;</span>, name=<span class="hljs-string">&#x27;���ںţ������ݵ�С�к�&#x27;</span>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="8-һ���������ܾ������Ĳ����б���"><a href="#8-һ���������ܾ������Ĳ����б���" class="headerlink" title="8. һ���������ܾ������Ĳ����б���"></a>8. һ���������ܾ������Ĳ����б���</h3><p>��������ôһ�����з������β����ĸ�������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserInfo</span><span class="hljs-params">(String name, String age, String sex, String mobile)</span> </span>&#123;<br>  <span class="hljs-comment">// do something ...</span><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>���������Ҫ�ഫһ��version����������������Ĺ��з���������dubbo���ֶ����ṩ�ĽӿڵĻ�����ô��Ľӿ��ǲ�����Ҫ�����ϰ汾����</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserInfo</span><span class="hljs-params">(String name, String age, String sex, String mobile)</span> </span>&#123;<br>  <span class="hljs-comment">// do something ...</span><br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * �½ӿڵ�����</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getNewUserInfo</span><span class="hljs-params">(String name, String age, String sex, String mobile, String version)</span> </span>&#123;<br>  <span class="hljs-comment">// do something ...</span><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>�����أ�һ��һ�������Ĳ�����һ�㲻�˹����������Ĳ����б������������������ţ����ҽӿ�����ʱ�����ܻ�Ҫ�������ϰ汾���ݡ��������ʵ���Ƕ���ô���أ������ø�DTO�����װһ����Щ������~���£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUserInfo</span><span class="hljs-params">(UserInfoParamDTO userInfoParamDTO)</span> </span>&#123;<br>  <span class="hljs-comment">// do something ...</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoParamDTO</span> </span>&#123;<br>  <span class="hljs-keyword">private</span> String name;<br>  <span class="hljs-keyword">private</span> String age; <br>  <span class="hljs-keyword">private</span> String sex;<br>  <span class="hljs-keyword">private</span> String mobile;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>�ø�DTO�����װһ�£���ʹ�����в����䶯��Ҳ���Բ��ö�����ӿ��ˣ��ô��ܸܵġ�</p>
<h3 id="9-ʹ�u�����������IO����"><a href="#9-ʹ�u�����������IO����" class="headerlink" title="9. ʹ�û�����������IO����"></a>9. ʹ�û�����������IO����</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@desc</span>: ����һ��ͼƬ�ļ�</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> FileNotFoundException </span>&#123;<br>        <span class="hljs-keyword">long</span> begin = System.currentTimeMillis();<br>        <span class="hljs-keyword">try</span> (FileInputStream input = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;C:/456.png&quot;</span>);<br>             FileOutputStream output = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;C:/789.png&quot;</span>)) &#123;<br>            <span class="hljs-keyword">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-keyword">int</span> i;<br>            <span class="hljs-keyword">while</span> ((i = input.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                output.write(bytes,<span class="hljs-number">0</span>,i);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            log.error(<span class="hljs-string">&quot;�����ļ������쳣&quot;</span>,e);<br>        &#125;<br>        log.info(<span class="hljs-string">&quot;��������д���ܹ���ʱms��&quot;</span>+(System.currentTimeMillis() - begin));<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">��������д���ܹ���ʱms:52<br></code></pre></div></td></tr></table></figure>



<p>ʹ��<code>FileInputStream</code>��<code>FileOutputStream</code>ʵ���ļ���д���ܣ���û��ʲô����ġ������أ�����ʹ�û�����<code>BufferedReader</code>��<code>BufferedWriter</code>��<code>BufferedInputStream</code>��<code>BufferedOutputStream</code>�ȣ�����IO��������߶�дЧ�ʡ�</p>
<blockquote>
<p> ����ǲ��������������ȡ��һ���ֽڻ����ַ��ģ��ͻ�ֱ����������ˡ����������������ȡ��һ���ֽڻ����ַ�ʱ���Ȳ���������ǵȴﵽ�������������������һ���������</p>
</blockquote>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@desc</span>: ����һ��ͼƬ�ļ�</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> FileNotFoundException </span>&#123;<br>        <span class="hljs-keyword">long</span> begin = System.currentTimeMillis();<br>        <span class="hljs-keyword">try</span> (BufferedInputStream bufferedInputStream = <span class="hljs-keyword">new</span> BufferedInputStream(<span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;C:/456.png&quot;</span>));<br>        BufferedOutputStream  bufferedOutputStream = <span class="hljs-keyword">new</span> BufferedOutputStream(<span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;C:/789.png&quot;</span>))) &#123;<br>            <span class="hljs-keyword">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-keyword">int</span> i;<br>            <span class="hljs-keyword">while</span> ((i = input.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                output.write(bytes,<span class="hljs-number">0</span>,i);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            log.error(<span class="hljs-string">&quot;�����ļ������쳣&quot;</span>,e);<br>        &#125;<br>        log.info(<span class="hljs-string">&quot;�ܹ���ʱms&quot;</span>+(System.currentTimeMillis() - begin));<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">��������д���ܹ���ʱms:12<br></code></pre></div></td></tr></table></figure>

<h3 id="10-�Z���ĳ����߼�������j���Ѿ��鵽�����ݣ��ں���k���Ҳ�o��L����o��԰����´��εg����ٷ�������-���"><a href="#10-�Z���ĳ����߼�������j���Ѿ��鵽�����ݣ��ں���k���Ҳ�o��L����o��԰����´��εg����ٷ�������-���" class="headerlink" title="10. �Ż���ĳ����߼�������ǰ���Ѿ��鵽�����ݣ��ں���ķ���Ҳ�õ��Ļ����ǿ��԰����´��εģ����ٷ�������/���"></a>10. �Ż���ĳ����߼�������ǰ���Ѿ��鵽�����ݣ��ں���ķ���Ҳ�õ��Ļ����ǿ��԰����´��εģ����ٷ�������/���</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">dealRequest</span><span class="hljs-params">(Request request)</span> </span>&#123;<br>    <br>    UserInfo userInfo = userInfoDao.selectUserByUserId(request.getUserId);<br>     <span class="hljs-keyword">if</span>(Objects.isNull(request))&#123;<br>       <span class="hljs-keyword">return</span> ;<br>     &#125;<br>   <br>    insertUserVip(request.getUserId);<br>   <br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> insertUserVip��String userId��&#123;<br>      <span class="hljs-comment">//�ֲ���һ�� </span><br>      UserInfo userInfo = userInfoDao.selectUserByUserId(request.getUserId);<br>      <span class="hljs-comment">//�����û�vip��ˮ</span><br>      insertUserVipFlow(userInfo);<br>      ....<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p>����Ȼ�����ϳ�����룬�Ѿ��鵽 userInfo��Ȼ���ְ�userId����ȥ���ֲ����һ�Ρ�����ʵ���ϣ����԰�userInfo����ȥ�ģ���������ʡȥһ�β���������������Ч��</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">dealRequest</span><span class="hljs-params">(Request request)</span></span>&#123;<br>    <br>    UserInfo userInfo = userInfoDao.selectUserByUserId(request.getUserId);<br>    <span class="hljs-keyword">if</span>(Objects.isNull(request))&#123;<br>       <span class="hljs-keyword">return</span> ;<br>     &#125;<br>   <br>    insertUserVip(userInfo);<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> insertUserVip��UserInfo userInfo��&#123;<br>      <span class="hljs-comment">//�����û�vip��ˮ</span><br>      insertUserVipFlow(userInfo);<br>      ....<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="11-��ҪΪ�˷��㣬ֱ���ڴ�����ʹ��0-1��h��ֵ��Ӧ��Ҫ��enumo�ٴ��档"><a href="#11-��ҪΪ�˷��㣬ֱ���ڴ�����ʹ��0-1��h��ֵ��Ӧ��Ҫ��enumo�ٴ��档" class="headerlink" title="11. ��ҪΪ�˷��㣬ֱ���ڴ�����ʹ��0,1��ħ��ֵ��Ӧ��Ҫ��enumö�ٴ��档"></a>11. ��ҪΪ�˷��㣬ֱ���ڴ�����ʹ��0,1��ħ��ֵ��Ӧ��Ҫ��enumö�ٴ��档</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;0&quot;</span>.equals(userInfo.getVipFlag)) &#123;<br>    <span class="hljs-comment">//�ǻ�Ա����ʾȥ��ͨ��Ա</span><br>    tipOpenVip(userInfo);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;1&quot;</span>.equals(userInfo.getVipFlag)) &#123;<br>    <span class="hljs-comment">//��Ա����ѫ�·���</span><br>    addMedal(userInfo);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(UserVipEnum.NOT_VIP.getCode.equals(userInfo.getVipFlag)) &#123;<br>    <span class="hljs-comment">//�ǻ�Ա����ʾȥ��ͨ��Ա</span><br>    tipOpenVip(userInfo);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(UserVipEnum.VIP.getCode.equals(userInfo.getVipFlag)) &#123;<br>    <span class="hljs-comment">//��Ա����ѫ�·���</span><br>    addMedal��userInfo��;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">UserVipEnum</span> </span>&#123;<br>    VIP(<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;��Ա&quot;</span>),<br>    NOT_VIP(<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;�ǻ�Ա&quot;</span>),:;<br><br>    <span class="hljs-keyword">private</span> String code; <br>    <span class="hljs-keyword">private</span> String desc;<br><br>    UserVipEnum(String code, String desc) &#123;<br>        <span class="hljs-keyword">this</span>.code = code;<br>        <span class="hljs-keyword">this</span>.desc = desc;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>д�����ʱ�򣬲�Ҫһʱ���𣬾�ֱ��ʹ��ħ��ֵ����ʹ��ħ��ֵ��ά���������������ܵġ�</p>
<h3 id="12-����Ա����ֵ����i�ʱ�����ȶ���Ϊ��̬����"><a href="#12-����Ա����ֵ����i�ʱ�����ȶ���Ϊ��̬����" class="headerlink" title="12. ����Ա����ֵ����ı�ʱ�����ȶ���Ϊ��̬����"></a>12. ����Ա����ֵ����ı�ʱ�����ȶ���Ϊ��̬����</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Task</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> timeout = <span class="hljs-number">10L</span>;<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Task</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> TIMEOUT = <span class="hljs-number">10L</span>;<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>��Ϊ�������Ϊstatic�����ྲ̬��������ÿ��ʵ�������У���ֻ��һ�ݸ���������ǳ�Ա������ÿ��ʵ�������У�������һ�ݸ�������Ȼ�����������������Ļ�������Ϊ��̬��������һЩ��</p>
</blockquote>
<h3 id="13-ע������ָ�룬��Ҫ��������ҵ��˵�����߼�ĳ������������Ϊ�ա�"><a href="#13-ע������ָ�룬��Ҫ��������ҵ��˵�����߼�ĳ������������Ϊ�ա�" class="headerlink" title="13. ע������ָ�룬��Ҫ��������ҵ��˵�����߼�ĳ������������Ϊ�ա�"></a>13. ע������ָ�룬��Ҫ��������ҵ��˵�����߼�ĳ������������Ϊ�ա�</h3><p>NullPointerException �������ճ������зǳ����������Ǵ��뿪�������У�һ��Ҫ�Կ�ָ�뱣�������������</p>
<p>��Ҫ���⼸���ָ�����⣺</p>
<ul>
<li>��װ���͵Ŀ�ָ������</li>
<li>�������õĿ�ָ������</li>
<li>Equals������ߵĿ�ָ������</li>
<li>ConcurrentHashMap ����������֧�� k-vΪ null��</li>
<li>���ϣ�����ֱ�ӻ�ȡԪ��</li>
<li>����ֱ�ӻ�ȡ����</li>
</ul>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NullPointTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">if</span> (s.equals(<span class="hljs-string">&quot;666&quot;</span>)) &#123; <span class="hljs-comment">//s����Ϊ�գ��ᵼ�¿�ָ������</span><br>            System.out.println(<span class="hljs-string">&quot;�ɻ�����&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="14�����񵽵��쳣�����ܺ����������ٴ����־��"><a href="#14�����񵽵��쳣�����ܺ����������ٴ����־��" class="headerlink" title="14�����񵽵��쳣�����ܺ����������ٴ����־��"></a>14�����񵽵��쳣�����ܺ����������ٴ����־��</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testIgnoreException</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;       <br>        <span class="hljs-comment">// ������</span><br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;    <br>        <span class="hljs-comment">//�������쳣��ɶ���鲻������־Ҳ���򣿣�</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testIgnoreException</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// ������</span><br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;     <br>        log.error(<span class="hljs-string">&quot;�쳣�ˣ���ϵ����С��翴����&quot;</span>,e); <br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="15-����Lambda����ʽ�滻�ڲ������࣬ʹ���������"><a href="#15-����Lambda����ʽ�滻�ڲ������࣬ʹ���������" class="headerlink" title="15. ����Lambda����ʽ�滻�ڲ������࣬ʹ���������"></a>15. ����Lambda����ʽ�滻�ڲ������࣬ʹ���������</h3><p>JDK8������������-Lambda����ʽ��Lambda����ʽ�����������ڲ���������ţ������ڴ����������У����ǲ���invokeDynamicָ��ʵ�֣�����������ڲ��࣬Ч��Ҳ����</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sortUserInfoList</span><span class="hljs-params">(List&lt;UserInfo&gt; userInfoList)</span> </span>&#123;<br>    userInfoList.sort(<span class="hljs-keyword">new</span> Comparator&lt;UserInfo&gt;() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(UserInfo user1, UserInfo user2)</span> </span>&#123;<br>            Long userId1 = user1.getUserId();<br>            Long userId2 = user2.getUserId();<br>            <span class="hljs-keyword">return</span> userId1.compareTo(userId2);<br>        &#125;&#125;);<br>    &#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sortUserInfoList</span><span class="hljs-params">(List&lt;UserInfo&gt; userInfoList)</span></span>&#123;<br>    userInfoList.sort((user1, user2) -&gt; &#123;<br>        Long userId1 = user1.getUserId();<br>        Long userId2 = user2.getUserId();<br>        <span class="hljs-keyword">return</span> userId1.compareTo(userId2);<br>    &#125;);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="16-֪ͨ�ࣨ�緢�ʼ����ж��t��J��룬�����첽������"><a href="#16-֪ͨ�ࣨ�緢�ʼ����ж��t��J��룬�����첽������" class="headerlink" title="16. ֪ͨ�ࣨ�緢�ʼ����ж��ţ��Ĵ��룬�����첽������"></a>16. ֪ͨ�ࣨ�緢�ʼ����ж��ţ��Ĵ��룬�����첽������</h3><p>����ҵ��������������Ҫ���û���½ʱ�����Ӹ�����֪ͨ���ķ�˿�� �������뵽��ʵ���������£�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241918885.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>�����ṩsendMsgNotify�����ϵͳ���ˣ����ߵ���sendMsgNotifyʧ���ˣ���ô�û���½��ʧ���ˡ�����<br>һ��֪ͨ���ܵ����˵�½�����̲����ã����Եļ���֥�鶪���ϡ���ô��û���������Ƽ�õķ����أ��еģ��������Žӿڲ����쳣���������������߳��첽���������£�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241918934.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>��ˣ�����֪ͨ��Ȳ��Ƿ���Ҫ���ɽ����Ľӿ�ʱ��Ӧ�þ������������Ƿ��Ӱ����Ҫ���̣�˼����ô������á�</p>
<h3 id="17-����Java����ʱ������YYYY��ʽ���o����⡣"><a href="#17-����Java����ʱ������YYYY��ʽ���o����⡣" class="headerlink" title="17. ����Java����ʱ������YYYY��ʽ���õ����⡣"></a>17. ����Java����ʱ������YYYY��ʽ���õ����⡣</h3><p>�ճ������У����Ǿ�����Ҫ�������ڡ�����Ҫ��ʱ���ڸ�ʽ����ʱ������Ǵ�д<code>YYYY</code>�Ŀӡ�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Calendar calendar = Calendar.getInstance();<br>calendar.set(<span class="hljs-number">2019</span>, Calendar.DECEMBER, <span class="hljs-number">31</span>);<br><br>Date testDate = calendar.getTime();<br><br>SimpleDateFormat dtf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;YYYY-MM-dd&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;2019-12-31 ת YYYY-MM-dd ��ʽ�� &quot;</span> + dtf.format(testDate));<br></code></pre></div></td></tr></table></figure>
<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">2019-12-31 ת YYYY-MM-dd ��ʽ�� 2020-12-31<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>Ϊʲô������2019��12��31�ţ���ת��һ�¸�ʽ���ͱ����2020��12��31���ˣ���ΪYYYY�ǻ�������������ģ���ָ�������������ڵ���ݣ�һ�ܴ����տ�ʼ��������������ֻҪ���ܿ��꣬��ô��һ�ܾ�����һ����ˡ���ȷ������ʹ��yyyy��ʽ��</p>
</blockquote>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241919044.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<h3 id="18-���һ����ȷ�����ᱻ�̳У�����������AOPɧ����������ָ��final���η�������final����һ�������ࡣ"><a href="#18-���һ����ȷ�����ᱻ�̳У�����������AOPɧ����������ָ��final���η�������final����һ�������ࡣ" class="headerlink" title="18. ���һ����ȷ�����ᱻ�̳У�����������AOPɧ����������ָ��final���η�������final����һ�������ࡣ"></a>18. ���һ����ȷ�����ᱻ�̳У�����������AOPɧ����������ָ��final���η�������final����һ�������ࡣ</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tools</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testFinal</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;�����෽��&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>һ����ָ����final���η��������ᱻ�̳��ˣ����������з�������final���ˡ�Java���������һ����������е�final������������Java����Ч�ʡ�</p>
<h3 id="19-static��̬������Ҫ����springʵ�������������ܻᵼ�³�ʼ������"><a href="#19-static��̬������Ҫ����springʵ�������������ܻᵼ�³�ʼ������" class="headerlink" title="19. static��̬������Ҫ����springʵ�������������ܻᵼ�³�ʼ������"></a>19. static��̬������Ҫ����springʵ�������������ܻᵼ�³�ʼ������</h3><p>֮ǰ������Ŀ�����ƵĴ��롣��̬����������spring������bean��</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SmsService smsService = SpringContextUtils.getBean(SmsService.class);<br></code></pre></div></td></tr></table></figure>

<p>�����̬��smsService�п��ܻ�ȡ�����ģ���Ϊ�����˳����ȷ���ģ������ϵĴ��룬��̬��smsService��ʼ��ǿ������spring������ʵ���ˡ���ȷ��д���������������£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SmsService smsService =<span class="hljs-keyword">null</span>;<br><br><span class="hljs-comment">//ʹ�õ���ʱ���ȡ��ȡ</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SmsService <span class="hljs-title">getSmsService</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-keyword">if</span>(smsService == <span class="hljs-keyword">null</span>) &#123;<br>     smsService = SpringContextUtils.getBean(SmsService.class);<br>  &#125;<br>  <span class="hljs-keyword">return</span> smsService;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="20-�����Ա�����޹صk�����Ӧ�������ɾ�̬����"><a href="#20-�����Ա�����޹صk�����Ӧ�������ɾ�̬����" class="headerlink" title="20. �����Ա�����޹صķ�����Ӧ�������ɾ�̬����"></a>20. �����Ա�����޹صķ�����Ӧ�������ɾ�̬����</h3><p>��Щ��������ʵ����Ա�����޹أ��Ϳ�������Ϊ��̬��������һ�㣬�������õúܶࡣ<strong>��������</strong>��</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * BigDecimal�Ĺ�����</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BigDecimalUtils</span> </span>&#123;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span>  BigDecimal <span class="hljs-title">ifNullSetZERO</span><span class="hljs-params">(BigDecimal in)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> in != <span class="hljs-keyword">null</span> ? in : BigDecimal.ZERO;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">sum</span><span class="hljs-params">(BigDecimal ...in)</span> </span>&#123;<br>        BigDecimal result = BigDecimal.ZERO;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; in.length; i++) &#123;<br>            result = result.add(ifNullSetZERO(in[i]));<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br></code></pre></div></td></tr></table></figure>

<p>��ΪBigDecimalUtils������ķ�����û��static���Σ����ԣ���Ҫʹ�õ�ʱ��ÿ�ζ�Ҫnewһ����,�ǲ��ͺ���Դȥ<strong>������������</strong>�����</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">BigDecimalUtils bigDecimalUtils = <span class="hljs-keyword">new</span> BigDecimalUtils();<br>bigDecimalUtils.sum(a, b);<br></code></pre></div></td></tr></table></figure>
<p>���Կ��������ɾ�̬������ʹ�õ�ʱ��ֱ��<code>����.����</code>���ü��ɣ��������£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * BigDecimal�Ĺ�����</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BigDecimalUtils</span> </span>&#123;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  BigDecimal <span class="hljs-title">ifNullSetZERO</span><span class="hljs-params">(BigDecimal in)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> in != <span class="hljs-keyword">null</span> ? in : BigDecimal.ZERO;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> BigDecimal <span class="hljs-title">sum</span><span class="hljs-params">(BigDecimal ...in)</span></span>&#123;<br>        BigDecimal result = BigDecimal.ZERO;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; in.length; i++)&#123;<br>            result = result.add(ifNullSetZERO(in[i]));<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="21-��Ҫ��һ��Exception��׽���п��ܵ��쳣��"><a href="#21-��Ҫ��һ��Exception��׽���п��ܵ��쳣��" class="headerlink" title="21. ��Ҫ��һ��Exception��׽���п��ܵ��쳣��"></a>21. ��Ҫ��һ��Exception��׽���п��ܵ��쳣��</h3><p><strong>����:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//���׳� IOException �Ĵ������</span><br>        <span class="hljs-comment">//���׳� SQLException �Ĵ������</span><br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        <span class="hljs-comment">//�û��� Exception ��׽�����п��ܵ��쳣����������ζ�������׽���ᶪʧԭʼ�쳣����Ч��ϢŶ</span><br>        log.info(<span class="hljs-string">&quot;Exception in test,exception:&#123;&#125;&quot;</span>, e);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//���׳� IOException �Ĵ������</span><br>        <span class="hljs-comment">//���׳� SQLException �Ĵ������</span><br>    &#125; <span class="hljs-keyword">catch</span>(IOException e) &#123;<br>        <span class="hljs-comment">//������׽ IOException</span><br>        log.info(<span class="hljs-string">&quot;IOException in test,exception:&#123;&#125;&quot;</span>, e);<br>    &#125; <span class="hljs-keyword">catch</span>(SQLException e) &#123;<br>        <span class="hljs-comment">//������׽ SQLException</span><br>        log.info(<span class="hljs-string">&quot;SQLException in test,exception:&#123;&#125;&quot;</span>, e);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="22-������Ҫ���ȷ�װ���Լ����༴�ɡ�"><a href="#22-������Ҫ���ȷ�װ���Լ����༴�ɡ�" class="headerlink" title="22. ������Ҫ���ȷ�װ���Լ����༴�ɡ�"></a>22. ������Ҫ���ȷ�װ���Լ����༴�ɡ�</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// ������װ</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isUserVip</span><span class="hljs-params">(Boolean isVip)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> Boolean.TRUE.equals(isVip);<br>&#125;<br><br><span class="hljs-comment">// ʹ�ô���</span><br><span class="hljs-keyword">boolean</span> isVip = isVip(user.getUserVip());<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">boolean</span> isVip = Boolean.TRUE.equals(user.getUserVip());<br></code></pre></div></td></tr></table></figure>

<p>������Ҫ���ȷ�װ������˼����������ɡ����ң��������û�������ջ�ͳ�ջ���������ĸ����CPU���ڴ棬���ȷ�װ����������ܵģ�</p>
<h3 id="23-��������ĳ�ֵһ���ᱻ���ae���u�б�Ҫ����������ֵ��"><a href="#23-��������ĳ�ֵһ���ᱻ���ae���u�б�Ҫ����������ֵ��" class="headerlink" title="23. ��������ĳ�ֵһ���ᱻ���ǣ���û�б�Ҫ����������ֵ��"></a>23. ��������ĳ�ֵһ���ᱻ���ǣ���û�б�Ҫ����������ֵ��</h3><p><strong>����:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">List&lt;UserInfo&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br><span class="hljs-keyword">if</span> (isAll) &#123;<br>    userList = userInfoDAO.queryAll();<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    userList = userInfoDAO.queryActive();<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">List&lt;UserInfo&gt; userList;<br><span class="hljs-keyword">if</span> (isAll) &#123;<br>    userList = userInfoDAO.queryAll();<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    userList = userInfoDAO.queryActive();<br>&#125;<br><br></code></pre></div></td></tr></table></figure>


<h3 id="24-�����ֵ����Ҫʹ��BigDecimal"><a href="#24-�����ֵ����Ҫʹ��BigDecimal" class="headerlink" title="24.�����ֵ����Ҫʹ��BigDecimal"></a>24.�����ֵ����Ҫʹ��BigDecimal</h3><p>���������������������Ӱɣ�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        System.out.println(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>);<br>        System.out.println(<span class="hljs-number">1.0</span> - <span class="hljs-number">0.8</span>);<br>        System.out.println(<span class="hljs-number">4.015</span> * <span class="hljs-number">100</span>);<br>        System.out.println(<span class="hljs-number">123.3</span> / <span class="hljs-number">100</span>);<br><br>        <span class="hljs-keyword">double</span> amount1 = <span class="hljs-number">3.15</span>;<br>        <span class="hljs-keyword">double</span> amount2 = <span class="hljs-number">2.10</span>;<br>        <span class="hljs-keyword">if</span> (amount1 - amount2 == <span class="hljs-number">1.05</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;OK&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>���н����</p>
<figure class="highlight sh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sh">0.30000000000000004<br>0.19999999999999996<br>401.49999999999994<br>1.2329999999999999<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>��Ϊ��������Զ����ƴ洢��ֵ�ģ����ڸ�����Ҳ�ǡ����ڼ�������ԣ�0.1�޷���ȷ��������Ϊʲô�������ᵼ�¾�ȷ��ȱʧ�ġ���ˣ������㣬һ�㶼����BigDecimal ����</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">System.out.println(<span class="hljs-keyword">new</span> BigDecimal(<span class="hljs-number">0.1</span>).add(<span class="hljs-keyword">new</span> BigDecimal(<span class="hljs-number">0.2</span>)));<br><span class="hljs-comment">//output:</span><br><span class="hljs-number">0.3000000000000000166533453693773481063544750213623046875</span><br></code></pre></div></td></tr></table></figure>
<p>��ʵ��ʹ�� BigDecimal ��ʾ�ͼ��㸡����������ʹ���ַ����Ĺ��췽������ʼ�� BigDecimal�����ң���Ҫ��עBigDecimal�ļ�λС���㣬���а�������ģʽ��</p>
<h3 id="25-ע��Arrays-asList�l�����"><a href="#25-ע��Arrays-asList�l�����" class="headerlink" title="25.  ע��Arrays.asList�ļ�����"></a>25.  ע��Arrays.asList�ļ�����</h3><ul>
<li><strong>�������Ͳ�����Ϊ Arrays.asList�����Ĳ���������ᱻ����һ��������</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayAsListTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span>[] array = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>        List list = Arrays.asList(array);<br>        System.out.println(list.size());<br>    &#125;<br>&#125;<br><span class="hljs-comment">//���н��</span><br><span class="hljs-number">1</span><br></code></pre></div></td></tr></table></figure>
<ul>
<li><strong>Arrays.asList ���ص� List ��֧����ɾ������</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayAsListTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String[] array = &#123;<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>&#125;;<br>        List list = Arrays.asList(array);<br>        list.add(<span class="hljs-string">&quot;5&quot;</span>);<br>        System.out.println(list.size());<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ���н��</span><br>Exception in thread <span class="hljs-string">&quot;main&quot;</span> java.lang.UnsupportedOperationException<br>	at java.util.AbstractList.add(AbstractList.java:<span class="hljs-number">148</span>)<br>	at java.util.AbstractList.add(AbstractList.java:<span class="hljs-number">108</span>)<br>	at object.ArrayAsListTest.main(ArrayAsListTest.java:<span class="hljs-number">11</span>)<br><br></code></pre></div></td></tr></table></figure>
<p> Arrays.asList ���ص� List ���������������� java.util.ArrayList������ Arrays ���ڲ���ArrayList���ڲ����ArrayListû��ʵ��add���������Ǹ����add������ʵ�֣��ǻ��׳��쳣���ء�</p>
<ul>
<li><strong>ʹ��Arrays.asLis��ʱ�򣬶�ԭʼ������޸Ļ�Ӱ�쵽���ǻ�õ��Ǹ�List</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayAsListTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String[] arr = &#123;<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>&#125;;<br>        List list = Arrays.asList(arr);<br>        arr[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;4&quot;</span>;<br>        System.out.println(<span class="hljs-string">&quot;ԭʼ����&quot;</span> + Arrays.toString(arr));<br>        System.out.println(<span class="hljs-string">&quot;list����&quot;</span> + list);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//���н��</span><br>ԭʼ����[<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>]<br>list����[<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>]<br></code></pre></div></td></tr></table></figure>

<h3 id="26����ʱ�ر�IO��Դ��"><a href="#26����ʱ�ر�IO��Դ��" class="headerlink" title="26����ʱ�ر�IO��Դ��"></a>26����ʱ�ر�IO��Դ��</h3><p>Ӧ�ô�Ҷ��й������ľ�����windowsϵͳ���������̫���ļ�����ϵͳ�������ͻ���õ��Ժܿ�����Ȼ������linux������Ҳһ����ƽʱ�����ļ����������ݿ����ӣ�IO��Դ�����û�رգ���ô���IO��Դ�ͻᱻ��ռ�ţ��������˾�û�а취���ˣ���������Դ�˷ѡ�</p>
<p>����ʹ����IO�����ǵùرչ�������ʹ��try-with-resource�رյģ�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (FileInputStream inputStream = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;jay.txt&quot;</span>)) &#123;<br>    <span class="hljs-comment">// use resources   </span><br>&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>    log.error(e);<br>&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>    log.error(e);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="27-����ʹ�u����ڵL���������ʱ����"><a href="#27-����ʹ�u����ڵL���������ʱ����" class="headerlink" title="27. ����ʹ�ú����ڵĻ���������ʱ����"></a>27. ����ʹ�ú����ڵĻ���������ʱ����</h3><blockquote>
<ul>
<li>�ڷ��������ڣ��������Ͳ����Լ���ʱ���������Ǳ�����ջ�еģ������ٶȱȽϿ졣</li>
<li>�������͵Ĳ�������ʱ���������ö�������ջ�У����ݶ������ڶ��У������ٶȽ�����</li>
<li>�����У��κ����͵ĳ�Ա�����������ڶѣ�Heap���У������ٶȽ�����</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccumulatorUtil</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> result = <span class="hljs-number">0.0D</span>;<br>    <span class="hljs-comment">//����</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAllOne</span><span class="hljs-params">( <span class="hljs-keyword">double</span>[] values)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">double</span> value : values) &#123;<br>            result += value;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//���������ڷ���������һ���ֲ���ʱ�������ۼ�����ٸ�ֵ��������ĳ�Ա����</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAll1Two</span><span class="hljs-params">(<span class="hljs-keyword">double</span>[] values)</span> </span>&#123;<br>        <span class="hljs-keyword">double</span> sum = <span class="hljs-number">0.0D</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">double</span> value : values) &#123;<br>            sum += value;<br>        &#125;<br>        result += sum;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="28-������ݿ�һ�β�ѯ���������࣬�����ҳ������"><a href="#28-������ݿ�һ�β�ѯ���������࣬�����ҳ������" class="headerlink" title="28. ������ݿ�һ�β�ѯ���������࣬�����ҳ������"></a>28. ������ݿ�һ�β�ѯ���������࣬�����ҳ������</h3><p>������Sqlһ���Բ�������������Ƚ϶࣬�����ҳ������</p>
<p><strong>������</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> user_id, name, age <span class="hljs-keyword">from</span> user_info;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> user_id, name, age <span class="hljs-keyword">from</span> user_info limit #&#123;<span class="hljs-keyword">offset</span>&#125;, #&#123;pageSize&#125;;<br></code></pre></div></td></tr></table></figure>

<p>���ƫ�����ر���ʱ�򣬲�ѯЧ�ʾͱ�õ��¡���������ַ�ʽ�Ż���</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//����һ �������ϴβ�ѯ������¼(ƫ����)</span><br>select id, name from user_info where id &gt; <span class="hljs-number">10000</span> limit #&#123;pageSize&#125;;<br><br><span class="hljs-comment">//��������order by + ����</span><br>select id, name from user_info order by id limit #&#123;offset&#125;, #&#123;pageSize&#125;;<br><br><span class="hljs-comment">//����������ҵ�����������������ҳ����</span><br><br></code></pre></div></td></tr></table></figure>

<h3 id="29-�������ٶԱ������ظ�����"><a href="#29-�������ٶԱ������ظ�����" class="headerlink" title="29. �������ٶԱ������ظ�����"></a>29. �������ٶԱ������ظ�����</h3><p>һ������д�����ʱ�򣬻������µķ�ʽʵ�ֱ�����</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; list.size; i++)&#123;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>���list�������Ƚ�С�ǻ��á����list�Ƚϴ�ʱ�������Ż���������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, <span class="hljs-keyword">int</span> length = list.size; i &lt; length; i++)&#123;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>���ɣ�</p>
<ul>
<li> �Է����ĵ��ã���ʹ��ֻ��һ����䣬Ҳ���������ĵģ����紴��ջ֡�����list�Ƚϴ�ʱ����ε���list.sizeҲ�ǻ�����Դ���ĵġ�</li>
</ul>
<h3 id="30-�޸K����Ͻӿڵ�ʱ��˼���ӿڵl����ԡ�"><a href="#30-�޸K����Ͻӿڵ�ʱ��˼���ӿڵl����ԡ�" class="headerlink" title="30. �޸Ķ����Ͻӿڵ�ʱ��˼���ӿڵļ����ԡ�"></a>30. �޸Ķ����Ͻӿڵ�ʱ��˼���ӿڵļ����ԡ�</h3><p>�ܶ�bug������Ϊ�޸��˶����Ͻӿڣ�����ȴ�������ݵ��µġ��ؼ������������ǱȽ����صģ�����ֱ�ӵ���ϵͳ����ʧ�ܵġ����ֳ���Ա�����׾ͷ����������Ŷ~</p>
<p>���ԣ���������������ԭ���ӿ����޸ģ�����������ӿ��Ƕ����ṩ����Ļ���һ��Ҫ���ǽӿڼ��ݡ��ٸ����Ӱɣ�����dubbo�ӿڣ�ԭ����ֻ����A��B���������������һ������C���Ϳ��Կ�������������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//�Ͻӿ�</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">oldService</span><span class="hljs-params">(A, B)</span> </span>&#123;<br>  <span class="hljs-comment">//�����½ӿڣ�����null����C</span><br>  newService(A, B, <span class="hljs-keyword">null</span>);<br>&#125;<br><br><span class="hljs-comment">//�½ӿڣ���ʱ����ɾ���Ͻӿڣ���Ҫ�����ݡ�</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newService</span><span class="hljs-params">(A, B, C)</span></span>;<br></code></pre></div></td></tr></table></figure>


<h3 id="31-�����ȡ��ʩ��������ʱ����������߽������������ou�"><a href="#31-�����ȡ��ʩ��������ʱ����������߽������������ou�" class="headerlink" title="31 �����ȡ��ʩ��������ʱ����������߽������������ȣ�"></a>31 �����ȡ��ʩ��������ʱ����������߽������������ȣ�</h3><p>�ճ������У�������Ҫ��ȡ��ʩ�������߽������������������ָ�������ʱ����</p>
<p>���ƴ���Ƚϳ���:</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String name = list.get(<span class="hljs-number">1</span>).getName(); <span class="hljs-comment">//list����Խ�磬��Ϊ��һ����2��Ԫ�ع�</span><br></code></pre></div></td></tr></table></figure>

<p>���ԣ�Ӧ�ò�ȡ��ʩ��Ԥ��һ������߽������<strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(CollectionsUtil.isNotEmpty(list) &amp;&amp; list.size() &gt; <span class="hljs-number">1</span>) &#123;<br>  String name = list.get(<span class="hljs-number">1</span>).getName(); <br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="32-ע��-ArrayList-toArray-oת�L�"><a href="#32-ע��-ArrayList-toArray-oת�L�" class="headerlink" title="32. ע�� ArrayList.toArray() ǿת�Ŀ�"></a>32. ע�� ArrayList.toArray() ǿת�Ŀ�</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayListTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;(<span class="hljs-number">1</span>);<br>        list.add(<span class="hljs-string">&quot;���ںţ������ݵ�С�к�&quot;</span>);<br>        String[] array21 = (String[]) list.toArray();<span class="hljs-comment">//����ת���쳣</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>��Ϊ���ص���Object���ͣ�Object��������ǿתString���飬�ᷢ��ClassCastException����������ǣ�ʹ��toArray()���ط���toArray(T[] a)</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String[] array1 = list.toArray(<span class="hljs-keyword">new</span> String[<span class="hljs-number">0</span>]);<span class="hljs-comment">//������������</span><br></code></pre></div></td></tr></table></figure>


<h3 id="33-��������ѭ����Զ�̵��a��������ݿ���������s����������С�"><a href="#33-��������ѭ����Զ�̵��a��������ݿ���������s����������С�" class="headerlink" title="33. ��������ѭ����Զ�̵��á��������ݿ���������ȿ����������С�"></a>33. ��������ѭ����Զ�̵��á��������ݿ���������ȿ����������С�</h3><p>�̲����������ݿ�������ǱȽϺ����硢IO��Դ�ģ����Ծ�������ѭ����Զ�̵��á�����ѭ����������ݿ⣬������һ���Բ����������Ҫѭ�����ȥ�顣�������أ�Ҳ��Ҫһ���Բ�̫�����ݹ���Ҫ����500һ�ν��ϣ�</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">remoteBatchQuery(param);<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>  remoteSingleQuery(param);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="34-д����룬�Զ�һ�¶��߳�ִ�л�������ע�Ⲣ��һ��������"><a href="#34-д����룬�Զ�һ�¶��߳�ִ�л�������ע�Ⲣ��һ��������" class="headerlink" title="34. д����룬�Զ�һ�¶��߳�ִ�л�������ע�Ⲣ��һ��������"></a>34. д����룬�Զ�һ�¶��߳�ִ�л�������ע�Ⲣ��һ��������</h3><p>���Ǿ�������һЩҵ�񳡾��������Ȳ�����û�м�¼���ٽ��ж�Ӧ�Ĳ����������޸ģ��������أ�(��ѯ+�޸�)����һ����ԭ�Ӳ���Ŷ���Զ��¶��̣߳��ͻᷢ���������ˣ�</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(isAvailable(ticketId)) &#123;  <span class="hljs-comment">//��ԭ�Ӳ���	</span><br>    <span class="hljs-number">1</span>�����ֽ����Ӳ���	<br>    <span class="hljs-number">2</span>��deleteTicketById(ticketId)	<br>&#125; <span class="hljs-keyword">else</span> &#123;	<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;û�п����ֽ�ȯ&quot;</span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>

<p>Ϊ�˸����������������������ͼ�ɣ�</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241929923.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<ul>
<li>1.�߳�A���ֽ�</li>
<li>2.�߳�B���ֽ�</li>
<li>3.�߳�Aɾ��Ʊ��־</li>
<li>4.�߳�Bɾ��Ʊ��־</li>
</ul>
<p>��Ȼ�������ڲ������⣬����Ӧ���������ݿ�ɾ��������ԭ���ԣ����£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(deleteAvailableTicketById(ticketId) == <span class="hljs-number">1</span>) &#123;	<span class="hljs-comment">//ԭ�Ӳ���</span><br>    <span class="hljs-number">1</span>�����ֽ����Ӳ���	<br>&#125; <span class="hljs-keyword">else</span> &#123;	<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;û�п����ֽ�ȯ&quot;</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="35-���߳��첽���s���a�����̳߳أ�������new-thread-ͬʱ�����̳߳��Ƿ����"><a href="#35-���߳��첽���s���a�����̳߳أ�������new-thread-ͬʱ�����̳߳��Ƿ����" class="headerlink" title="35 ���߳��첽���ȿ���ǡ�����̳߳أ�������new thread,ͬʱ�����̳߳��Ƿ����"></a>35 ���߳��첽���ȿ���ǡ�����̳߳أ�������new thread,ͬʱ�����̳߳��Ƿ����</h3><p>Ϊʲô����ʹ���̳߳أ�ʹ���̳߳����⼸��ô�ѽ</p>
<ul>
<li>�������ǹ����̣߳��������Ӵ����̺߳������̵߳���Դ��ġ�</li>
<li>�����Ӧ�ٶȡ�</li>
<li>�ظ����á�</li>
</ul>
<p>ͬʱ�أ�������Ҫ����ҵ�񶼹���һ���̳߳أ���Ҫ�����̳߳ظ��롣���ǲ�ͬ�Ĺؼ�ҵ�񣬷��䲻ͬ���̳߳أ�Ȼ���̳߳ز���ҲҪ����ǡ������֮ǰд����ƪ�̳߳صģ����û�����������Ȥ�����ѿ��Կ�һ�¹�</p>
<h3 id="36-�Z�����u���������ٷ������ظ�����"><a href="#36-�Z�����u���������ٷ������ظ�����" class="headerlink" title="36. �Ż�����ṹ���������ٷ������ظ�����"></a>36. �Ż�����ṹ���������ٷ������ظ�����</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listDetail</span><span class="hljs-params">(List&lt;UserInfo&gt; userInfoList)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; userInfoList.size(); i++) &#123;<br>        <span class="hljs-comment">//�ظ�����userList.size()������</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listDetail</span><span class="hljs-params">(List&lt;UserInfo&gt; userInfoList)</span> </span>&#123;<br>      <span class="hljs-keyword">int</span> length = userInfoList.size();<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>          <span class="hljs-comment">//���ٵ���userList.size()������ֻ��length��������һ�Ρ�</span><br>      &#125;<br>  &#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="37��ֱ�Ӵ��l�����һ���Դ����ݿ��ȡ̫�����ݵ��ڴ棬���ܵ���OOM����"><a href="#37��ֱ�Ӵ��l�����һ���Դ����ݿ��ȡ̫�����ݵ��ڴ棬���ܵ���OOM����" class="headerlink" title="37��ֱ�Ӵ��ļ�����һ���Դ����ݿ��ȡ̫�����ݵ��ڴ棬���ܵ���OOM����"></a>37��ֱ�Ӵ��ļ�����һ���Դ����ݿ��ȡ̫�����ݵ��ڴ棬���ܵ���OOM����</h3><p>���һ���԰Ѵ��ļ��������ݿ�̫�����ݴﵽ�ڴ棬�ǻᵼ��OOM�ġ����ԣ�Ϊʲô��ѯDB���ݿ⣬һ�㶼���������</p>
<p>��ȡ�ļ��Ļ���һ���ļ�����̫�󣬲�ʹ��Files.readAllLines()��Ϊʲô�أ���Ϊ����ֱ�Ӱ��ļ��������ڴ�ģ�Ԥ���²���OOM��ʹ������ɣ����Կ�������Դ�룺</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">readAllLines</span><span class="hljs-params">(Path path, Charset cs)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    <span class="hljs-keyword">try</span> (BufferedReader reader = newBufferedReader(path, cs)) &#123;<br>        List&lt;String&gt; result = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (;;) &#123;<br>            String line = reader.readLine();<br>            <span class="hljs-keyword">if</span> (line == <span class="hljs-keyword">null</span>)<br>                <span class="hljs-keyword">break</span>;<br>            result.add(line);<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>�����̫����ļ�������ʹ��Files.line()�����ȡ����ʱ��ȡ�ļ���Щ��һ����ʹ������Ҫ�ر���Դ���Ĺ���</p>
<h3 id="38-���o������ӿڣ���Ҫ�����쳣��������o�ԣ���ʱ�����⼸���㡣"><a href="#38-���o������ӿڣ���Ҫ�����쳣��������o�ԣ���ʱ�����⼸���㡣" class="headerlink" title="38. ���õ������ӿڣ���Ҫ�����쳣��������ȫ�ԣ���ʱ�����⼸���㡣"></a>38. ���õ������ӿڣ���Ҫ�����쳣��������ȫ�ԣ���ʱ�����⼸���㡣</h3><p>�ճ������У�������Ҫ���õ��������񣬻��߷ֲ�ʽԶ�̷���ĵĻ�����Ҫ���ǣ�</p>
<ul>
<li>�쳣���������磬������˵Ľӿڣ�����쳣�ˣ���ô�����������Ի��ǵ���ʧ�ܣ�</li>
<li>��ʱ��û��Ԥ���Է��ӿ�һ���÷��أ�һ�����ø���ʱ�Ͽ�ʱ�䣬�Ա�����Ľӿڣ�</li>
<li>���Դ�������Ľӿڵ�ʧ�ܣ��費��Ҫ���ԣ���Ҫվ��ҵ���ϽǶ�˼��������⣩</li>
</ul>
<blockquote>
<p>��һ�����ӣ���һ��http��������˵ķ�����Ҫ��������connect-time����retry������</p>
</blockquote>
<h3 id="39-��Ҫʹ��ѭ���������ϣ�����ʹ��JDK�s�k�����������"><a href="#39-��Ҫʹ��ѭ���������ϣ�����ʹ��JDK�s�k�����������" class="headerlink" title="39 ��Ҫʹ��ѭ���������ϣ�����ʹ��JDK�ṩ�ķ�����������"></a>39 ��Ҫʹ��ѭ���������ϣ�����ʹ��JDK�ṩ�ķ�����������</h3><blockquote>
<ul>
<li>JDK�ṩԭ��API����������ֱ��ָ�����ϵ�����������������������ܡ�</li>
<li>��Щ�����ĵײ����System.arraycopy����ʵ�֣��������ݵ���������Ч�ʸ��ߡ�</li>
</ul>
</blockquote>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;UserInfo&gt; <span class="hljs-title">copyMergeList</span><span class="hljs-params">(List&lt;UserInfo&gt; user1List, List&lt;UserInfo&gt; user2List)</span> </span>&#123;<br>     List&lt;UserInfo&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(user1List.size() + user2List.size());<br>     <span class="hljs-keyword">for</span> (UserInfo user : user1List) &#123;<br>         userList.add(user);<br>     &#125;<br>     <span class="hljs-keyword">for</span> (UserInfo user : user2List) &#123;<br>         userList.add(user);<br>     &#125;<br><br>     <span class="hljs-keyword">return</span> user1List;<br> &#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;UserInfo&gt; <span class="hljs-title">copyMergeList</span><span class="hljs-params">(List&lt;UserInfo&gt; user1List, List&lt;UserInfo&gt; user2List)</span> </span>&#123;<br>     List&lt;UserInfo&gt; userList = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(user1List.size() + user2List.size());<br>     userList.addAll(user1List);<br>     userList.addAll(user2List);<br>     <span class="hljs-keyword">return</span> user1List;<br> &#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="40-���ڸ��ӵJ����߼������������ע��"><a href="#40-���ڸ��ӵJ����߼������������ע��" class="headerlink" title="40. ���ڸ��ӵĴ����߼������������ע��"></a>40. ���ڸ��ӵĴ����߼������������ע��</h3><p>д�����ʱ����û�б�Ҫд̫���ע�͵ģ��õķ�����������������õ�ע�͡����ǣ������ҵ���߼��ܸ��ӵĴ��룬��ķǳ��б�Ҫд���ע�͡������ע�ͣ��������ں����ά����</p>
<h3 id="41-���߳�����£��������԰�o����"><a href="#41-���߳�����£��������԰�o����" class="headerlink" title="41. ���߳�����£��������԰�ȫ����"></a>41. ���߳�����£��������԰�ȫ����</h3><p>�ڸ߲�������£�HashMap���ܻ������ѭ������Ϊ���Ƿ����԰�ȫ�ģ����Կ���ʹ��ConcurrentHashMap�� �������Ҳ��������ϰ�ߣ���Ҫ�������־���һ��new HashMap();</p>
<ul>
<li>Hashmap��Arraylist��LinkedList��TreeMap�ȶ������Բ���ȫ�ģ�</li>
<li>Vector��Hashtable��ConcurrentHashMap�ȶ������԰�ȫ��</li>
</ul>
<h3 id="42-ʹ��spring������ʱ��ע���⼸������δ��Ч�L�"><a href="#42-ʹ��spring������ʱ��ע���⼸������δ��Ч�L�" class="headerlink" title="42. ʹ��spring������ʱ��ע���⼸������δ��Ч�Ŀ�"></a>42. ʹ��spring������ʱ��ע���⼸������δ��Ч�Ŀ�</h3><p>�ճ�ҵ�񿪷��У����Ǿ���������򽻵�������ʧЧ��Ҫ�����¼���������</p>
<ul>
<li>�ײ����ݿ����治֧������</li>
<li>�ڷ�public���εķ���ʹ��</li>
<li>rollbackFor�������ô���</li>
<li>���෽��ֱ�ӵ���</li>
<li>�쳣��try…catch���ˣ���������ʧЧ��</li>
</ul>
<p><strong>������</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TransactionTest</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">A</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//����һ������</span><br>    <span class="hljs-comment">//���÷���B (���ص�����ã�����ʧЧ��)</span><br>    B();<br>  &#125;<br>  <br>  <span class="hljs-meta">@Transactional</span><br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">B</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//��������</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>ע������񷽷������෽��ֱ�ӵ��ã�����ʧЧ</strong></p>
<h3 id="43-ʹ��Executors�����̳߳أ�newFixedThreadPool��OOM����"><a href="#43-ʹ��Executors�����̳߳أ�newFixedThreadPool��OOM����" class="headerlink" title="43. ʹ��Executors�����̳߳أ�newFixedThreadPool��OOM����"></a>43. ʹ��Executors�����̳߳أ�newFixedThreadPool��OOM����</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">ExecutorService executor = Executors.newFixedThreadPool(<span class="hljs-number">10</span>);<br>       <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Integer.MAX_VALUE; i++) &#123;<br>           executor.execute(() -&gt; &#123;<br>               <span class="hljs-keyword">try</span> &#123;<br>                   Thread.sleep(<span class="hljs-number">10000</span>);<br>               &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                   <span class="hljs-comment">//do nothing</span><br>               &#125;<br>           &#125;);<br>       &#125;<br></code></pre></div></td></tr></table></figure>
<p>IDEָ��JVM������-Xmx8m -Xms8m :</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241931620.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>���н����</p>
<p><img src="https://tuyong.oss-cn-hangzhou.aliyuncs.com/img/202210241931446.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>���ǿ���Դ�룬��ʵnewFixedThreadPoolʹ�õ����޽���У�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title">newFixedThreadPool</span><span class="hljs-params">(<span class="hljs-keyword">int</span> nThreads)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,<br>                                  <span class="hljs-number">0L</span>, TimeUnit.MILLISECONDS,<br>                                  <span class="hljs-keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedBlockingQueue</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractQueue</span>&lt;<span class="hljs-title">E</span>&gt;</span><br><span class="hljs-class">        <span class="hljs-keyword">implements</span> <span class="hljs-title">BlockingQueue</span>&lt;<span class="hljs-title">E</span>&gt;, <span class="hljs-title">java</span>.<span class="hljs-title">io</span>.<span class="hljs-title">Serializable</span> </span>&#123;<br>    ...<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Creates a &#123;<span class="hljs-doctag">@code</span> LinkedBlockingQueue&#125; with a capacity of</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> Integer#MAX_VALUE&#125;.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LinkedBlockingQueue</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>(Integer.MAX_VALUE);<br>    &#125;<br>...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>newFixedThreadPool�̳߳صĺ����߳����ǹ̶��ģ���ʹ���˽������޽��LinkedBlockingQueue�������С��������߳�������������ӵ��������У��������ִ�е�ʱ��Ƚϳ���û���ͷţ��ᵼ��Խ��Խ�������ѻ����������У�����»������ڴ�ʹ�ò�ͣ����������JVM OOM��</p>
</blockquote>
<h3 id="44-catchס�쳣�󣬾�����Ҫʹ��e-printStackTrace-����ʹ��log��ӡ��"><a href="#44-catchס�쳣�󣬾�����Ҫʹ��e-printStackTrace-����ʹ��log��ӡ��" class="headerlink" title="44. catchס�쳣�󣬾�����Ҫʹ��e.printStackTrace(),����ʹ��log��ӡ��"></a>44. catchס�쳣�󣬾�����Ҫʹ��e.printStackTrace(),����ʹ��log��ӡ��</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// do what you want  </span><br>&#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>  e.printStackTrace();<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// do what you want  </span><br>&#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>  log.info(<span class="hljs-string">&quot;��ĳ������쳣��&quot;</span>,e);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="45-�ӿ���Ҫ�����ݵ���"><a href="#45-�ӿ���Ҫ�����ݵ���" class="headerlink" title="45. �ӿ���Ҫ�����ݵ���"></a>45. �ӿ���Ҫ�����ݵ���</h3><p>�ӿ�����Ҫ�����ݵ��Եģ������������ת����Щ��Ҫ�ӿڡ���ֱ�۵�ҵ�񳡾��������û����ŵ����Σ���Ľӿ���û��holdס��</p>
<p>һ���ݵȼ����������⼸��:</p>
<ul>
<li>��ѯ����</li>
<li>Ψһ����</li>
<li>token���ƣ���ֹ�ظ��ύ</li>
<li>���ݿ��delete/update����</li>
<li>�ֹ���</li>
<li>������</li>
<li>Redis��zookeeper �ֲ�ʽ������ǰ�������������Redis�ֲ�ʽ����</li>
<li>״̬���ݵ�</li>
</ul>
<h3 id="46-���������L϶�l��������黮��С��������o�ɶ��ԡ�"><a href="#46-���������L϶�l��������黮��С��������o�ɶ��ԡ�" class="headerlink" title="46. ���������Ƚ϶�ĺ��������黮��С��������ǿ�ɶ��ԡ�"></a>46. ���������Ƚ϶�ĺ��������黮��С��������ǿ�ɶ��ԡ�</h3><p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Vector&lt;Order&gt; orders = <span class="hljs-keyword">new</span> Vector&lt;Order&gt;();<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printOwing</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">//print banner</span><br>        System.out.println(<span class="hljs-string">&quot;****************&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*****customer Owes *****&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;****************&quot;</span>);<br><br>        <span class="hljs-comment">//calculate totalAmount</span><br>        Enumeration env = orders.elements();<br>        <span class="hljs-keyword">double</span> totalAmount = <span class="hljs-number">0.0</span>;<br>        <span class="hljs-keyword">while</span> (env.hasMoreElements()) &#123;<br>            Order order = (Order) env.nextElement();<br>            totalAmount += order.getAmout();<br>        &#125;<br><br>        <span class="hljs-comment">//print details</span><br>        System.out.println(<span class="hljs-string">&quot;name:&quot;</span> + name);<br>        System.out.println(<span class="hljs-string">&quot;amount:&quot;</span> + totalAmount);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Vector&lt;Order&gt; orders = <span class="hljs-keyword">new</span> Vector&lt;Order&gt;();<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printOwing</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">//print banner</span><br>        printBanner();<br>        <span class="hljs-comment">//calculate totalAmount</span><br>        <span class="hljs-keyword">double</span> totalAmount = getTotalAmount();<br>        <span class="hljs-comment">//print details</span><br>        printDetail(totalAmount);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printBanner</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;****************&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;*****customer Owes*****&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;****************&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getTotalAmount</span><span class="hljs-params">()</span> </span>&#123;<br>        Enumeration env = orders.elements();<br>        <span class="hljs-keyword">double</span> totalAmount = <span class="hljs-number">0.0</span>;<br>        <span class="hljs-keyword">while</span> (env.hasMoreElements()) &#123;<br>            Order order = (Order) env.nextElement();<br>            totalAmount += order.getAmout();<br>        &#125;<br>        <span class="hljs-keyword">return</span> totalAmount;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printDetail</span><span class="hljs-params">(<span class="hljs-keyword">double</span> totalAmount)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;name:&quot;</span> + name);<br>        System.out.println(<span class="hljs-string">&quot;amount:&quot;</span> + totalAmount);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>һ�������߳��ĺ�������һ����Ҫע�Ͳ�������������;�Ĵ��룬���Կ��ǰ����зֳ�һ��������ȷ�ĺ�����Ԫ��������������̵ĺ��������������ô����ø������š�</p>
<h3 id="47-��Lؼ�ҵ����룬һ�㽨������־���ݻ�����"><a href="#47-��Lؼ�ҵ����룬һ�㽨������־���ݻ�����" class="headerlink" title="47. ��Ĺؼ�ҵ����룬һ�㽨������־���ݻ�����"></a>47. ��Ĺؼ�ҵ����룬һ�㽨������־���ݻ�����</h3><p>�ؼ�ҵ��������������εأ���Ӧ�����㹻����־���ݻ�����</p>
<blockquote>
<p>���磺��ʵ��ת��ҵ��ת��������Ȼ��תʧ���ˣ����ſͻ�Ͷ�ߣ�Ȼ���㻹û�д�ӡ����־����������ˮ����ȵ������£���ȴ���ް취������</p>
</blockquote>
<p>��ô�����ת��ҵ����Ҫ��Щ��־��Ϣ�أ����٣���������ǰ�������Ҫ��ӡ��Ҫ�ɣ��ӿڵ��ú���Ҫ����һ���쳣�ɣ�ͬʱ��ӡ�쳣�����־�ɣ����£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">transfer</span><span class="hljs-params">(TransferDTO transferDTO)</span> </span>&#123;<br>    log.info(<span class="hljs-string">&quot;invoke tranfer begin&quot;</span>);<br>    <span class="hljs-comment">//��ӡ���</span><br>    log.info(<span class="hljs-string">&quot;invoke tranfer,paramters:&#123;&#125;&quot;</span>, transferDTO);<br>    <span class="hljs-keyword">try</span> &#123;<br>        res = transferService.transfer(transferDTO);<br>    &#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>        log.error(<span class="hljs-string">&quot;transfer fail,cifno:&#123;&#125;��account��&#123;&#125;&quot;</span>, transferDTO.getCifno(), transferDTO.getaccount());<br>        log.error(<span class="hljs-string">&quot;transfer fail,exception:&#123;&#125;&quot;</span>, e);<br>    &#125;<br>    log.info(<span class="hljs-string">&quot;invoke tranfer end&quot;</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>���˴�ӡ�㹻����־�����ǻ���Ҫע��һ���ǣ���־��������ʹ�ã��𱾸ô�ӡinfo����־����ȴ��ӡ��error���𣬸澯��ҹ�������������Ų�����Ͳ����ˡ�</p>
<h3 id="48-ĳЩ�m����أ�����P���ȵou��������u��Ƿ������ء�"><a href="#48-ĳЩ�m����أ�����P���ȵou��������u��Ƿ������ء�" class="headerlink" title="48. ĳЩ�ɱ����أ�����Ƥ���ȵȣ��������û��Ƿ������ء�"></a>48. ĳЩ�ɱ����أ�����Ƥ���ȵȣ��������û��Ƿ������ء�</h3><p>�����Ʒ���˸��������ʥ���ڵ�ʱ�򣬺��Ƥ��Ϊʥ������صģ����ڵ�ʱ�򣬺��Ƥ���ȡ�</p>
<p>����:</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (duringChristmas) &#123;<br>   img = redPacketChristmasSkin;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (duringSpringFestival) &#123;<br>   img = redSpringFestivalSkin;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>�������Ԫ���ڵ�ʱ����ӪС���ͻȻ�����뷨�����Ƥ�����ɵ�����صģ���ʱ���ǲ���Ҫȥ�޸Ĵ����ˣ����·����ˣ���һ��ʼ��ʵ��һ�ź��Ƥ�������ñ��������Ƥ���������û��أ��������Ƥ����ֻ���޸�һ�±����ݾͺ��ˡ�</p>
<h3 id="49��-ֱ�ӵ�����Ҫʹ�ol���-�����ڶ������"><a href="#49��-ֱ�ӵ�����Ҫʹ�ol���-�����ڶ������" class="headerlink" title="49��.ֱ�ӵ�����Ҫʹ�õļ���,�����ڶ������"></a>49��.ֱ�ӵ�����Ҫʹ�õļ���,�����ڶ������</h3><p>ֱ�ӵ�����Ҫʹ�õļ��ϣ�����ͨ������������ȡ���ݣ��Ƚϵ��;���Map�ĵ���������</p>
<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Map&lt;Long, UserDO&gt; userMap = ...;<br><span class="hljs-keyword">for</span> (Long userId : userMap.keySet()) &#123;<br>    UserDO user = userMap.get(userId);<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><strong>������</strong></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Map&lt;Long, UserDO&gt; userMap = ...;<br><span class="hljs-keyword">for</span> (Map.Entry&lt;Long, UserDO&gt; userEntry : userMap.entrySet()) &#123;<br>    Long userId = userEntry.getKey();<br>    UserDO user = userEntry.getValue();<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h3 id="50-����gʽ-���������Z������if-else"><a href="#50-����gʽ-���������Z������if-else" class="headerlink" title="50. ����ģʽ+���������Ż������if else"></a>50. ����ģʽ+���������Ż������if else</h3><p>������</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String medalType = <span class="hljs-string">&quot;guest&quot;</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;guest&quot;</span>.equals(medalType)) &#123;<br>    System.out.println(<span class="hljs-string">&quot;�α�ѫ��&quot;</span>);<br> &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;vip&quot;</span>.equals(medalType)) &#123;<br>    System.out.println(<span class="hljs-string">&quot;��Աѫ��&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;guard&quot;</span>.equals(medalType)) &#123;<br>    System.out.println(<span class="hljs-string">&quot;չʾ�ػ�ѫ��&quot;</span>);<br>&#125;<br>...<br></code></pre></div></td></tr></table></figure>

<p>���ȣ����ǰ�ÿ�������߼�����飬�����һ�������Ľӿڣ����Ǹ���ÿ���߼��������������Ӧ�Ĳ���ʵ���࣬�ɵ����´��룺</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//ѫ�½ӿ�</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IMedalService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">showMedal</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-comment">//�ػ�ѫ�²���ʵ����</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GuardMedalServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IMedalService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMedal</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;չʾ�ػ�ѫ��&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//�α�ѫ�²���ʵ����</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GuestMedalServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IMedalService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMedal</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;�α�ѫ��&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//VIPѫ�²���ʵ����</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipMedalServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IMedalService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMedal</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;��Աѫ��&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>�������������ٶ�����Թ����࣬����������Щѫ��ʵ�ֲ����࣬���£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//ѫ�·��񹤲���</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MedalServicesFactory</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;String, IMedalService&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-keyword">static</span> &#123;<br>        map.put(<span class="hljs-string">&quot;guard&quot;</span>, <span class="hljs-keyword">new</span> GuardMedalServiceImpl());<br>        map.put(<span class="hljs-string">&quot;vip&quot;</span>, <span class="hljs-keyword">new</span> VipMedalServiceImpl());<br>        map.put(<span class="hljs-string">&quot;guest&quot;</span>, <span class="hljs-keyword">new</span> GuestMedalServiceImpl());<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IMedalService <span class="hljs-title">getMedalService</span><span class="hljs-params">(String medalType)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> map.get(medalType);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>�Ż����������£�</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String medalType = <span class="hljs-string">&quot;guest&quot;</span>;<br>        IMedalService medalService = MedalServicesFactory.getMedalService(medalType);<br>        medalService.showMedal();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/categories/Java/interview/">interview</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/tags/%EF%BF%BD%E6%BE%AD/">�澭</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/26/Java%E6%97%A5%E5%B8%B8%E5%BC%80%E5%8F%91%E7%9A%8421%E4%B8%AA%E5%9D%91/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java日常开发的21个坑</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/26/%E6%8E%8C%E6%8F%A1Java%E6%9E%9A%E4%B8%BE%E8%BF%99%E5%87%A0%E4%B8%AA%E7%9F%A5%E8%AF%86%E7%82%B9/">
                        <span class="hidden-mobile">掌握Java枚举这几个知识点</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://github.com/xiaobeibi" target="_blank" rel="nofollow noopener"><span>Github</span></a> <i class="iconfont icon-love"></i> <a href="https://gitee.com/tytokongjian" target="_blank" rel="nofollow noopener"><span>Gitee</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
